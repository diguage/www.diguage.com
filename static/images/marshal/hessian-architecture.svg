<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1371px" preserveAspectRatio="none" style="width:1426px;height:1371px;background:#FFFFFF;" version="1.1" viewBox="0 0 1426 1371" width="1426px" zoomAndPan="magnify"><defs/><g><rect height="45.332" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="203" x="604.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="30" font-weight="bold" lengthAdjust="spacing" textLength="193" x="609.5" y="39.0039">Hessian 架构</text><!--MD5=[0cd3f7edc610ca4d33c23c1943415164]
class AbstractHessianInput--><g id="elem_AbstractHessianInput"><rect codeLine="4" fill="#F1F1F1" height="48" id="AbstractHessianInput" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="178" x="7" y="104.332"/><ellipse cx="22" cy="120.332" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M21.8633,115.6802 L20.7095,120.752 L23.0254,120.752 Z M20.3691,113.439 L23.3657,113.439 L26.7109,125.832 L24.2622,125.832 L23.4985,122.769 L20.2197,122.769 L19.4727,125.832 L17.0239,125.832 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="146" x="36" y="125.623">AbstractHessianInput</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="184" y1="136.332" y2="136.332"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="184" y1="144.332" y2="144.332"/></g><!--MD5=[3dcd6432be4763f09dce15986ddfbf6e]
class Hessian2Input--><g id="elem_Hessian2Input"><rect codeLine="6" fill="#F1F1F1" height="130.4414" id="Hessian2Input" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="335" x="20.5" y="253.332"/><ellipse cx="134.75" cy="269.332" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M137.2231,275.4751 Q136.6421,275.7739 136.0029,275.9233 Q135.3638,276.0728 134.6582,276.0728 Q132.1514,276.0728 130.8315,274.4209 Q129.5117,272.769 129.5117,269.6479 Q129.5117,266.5186 130.8315,264.8667 Q132.1514,263.2148 134.6582,263.2148 Q135.3638,263.2148 136.0112,263.3643 Q136.6587,263.5137 137.2231,263.8125 L137.2231,266.5352 Q136.5923,265.9541 135.9988,265.6843 Q135.4053,265.4146 134.7744,265.4146 Q133.4297,265.4146 132.7449,266.4812 Q132.0601,267.5479 132.0601,269.6479 Q132.0601,271.7397 132.7449,272.8064 Q133.4297,273.873 134.7744,273.873 Q135.4053,273.873 135.9988,273.6033 Q136.5923,273.3335 137.2231,272.7524 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="155.25" y="274.623">Hessian2Input</text><line style="stroke:#181818;stroke-width:0.5;" x1="21.5" x2="354.5" y1="285.332" y2="285.332"/><polygon fill="none" points="31.5,291.332,35.5,295.332,31.5,299.332,27.5,295.332" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="287" x="40.5" y="302.8672">SerializerFactory _defaultSerializerFactory</text><polygon fill="none" points="31.5,307.8203,35.5,311.8203,31.5,315.8203,27.5,311.8203" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="242" x="40.5" y="319.3555">SerializerFactory _serializerFactory;</text><line style="stroke:#181818;stroke-width:0.5;" x1="21.5" x2="354.5" y1="326.3086" y2="326.3086"/><ellipse cx="31.5" cy="337.3086" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="309" x="40.5" y="343.8438">setSerializerFactory(SerializerFactory factory)</text><ellipse cx="31.5" cy="353.7969" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="264" x="40.5" y="360.332">SerializerFactory getSerializerFactory()</text><polygon fill="#FFFF44" points="31.5,365.2852,35.5,369.2852,31.5,373.2852,27.5,369.2852" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="269" x="40.5" y="376.8203">SerializerFactory findSerializerFactory()</text></g><!--MD5=[74c36771e2d1d14c81d6e5c916f77cda]
class Hessian2Constants--><g id="elem_Hessian2Constants"><rect fill="#F1F1F1" height="48" id="Hessian2Constants" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163" x="220.5" y="104.332"/><ellipse cx="235.5" cy="120.332" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M231.9277,116.5972 L231.9277,114.439 L239.3071,114.439 L239.3071,116.5972 L236.8418,116.5972 L236.8418,124.6738 L239.3071,124.6738 L239.3071,126.832 L231.9277,126.832 L231.9277,124.6738 L234.3931,124.6738 L234.3931,116.5972 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="131" x="249.5" y="125.623">Hessian2Constants</text><line style="stroke:#181818;stroke-width:0.5;" x1="221.5" x2="382.5" y1="136.332" y2="136.332"/><line style="stroke:#181818;stroke-width:0.5;" x1="221.5" x2="382.5" y1="144.332" y2="144.332"/></g><!--MD5=[0c6497a22e8a9ff169605329b1f434f9]
class SerializerFactory--><g id="elem_SerializerFactory"><rect codeLine="35" fill="#F1F1F1" height="262.3477" id="SerializerFactory" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="629" x="271.5" y="443.332"/><ellipse cx="524.75" cy="459.332" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M527.2231,465.4751 Q526.6421,465.7739 526.0029,465.9233 Q525.3638,466.0728 524.6582,466.0728 Q522.1514,466.0728 520.8315,464.4209 Q519.5117,462.769 519.5117,459.6479 Q519.5117,456.5186 520.8315,454.8667 Q522.1514,453.2148 524.6582,453.2148 Q525.3638,453.2148 526.0112,453.3643 Q526.6587,453.5137 527.2231,453.8125 L527.2231,456.5352 Q526.5923,455.9541 525.9988,455.6843 Q525.4053,455.4146 524.7744,455.4146 Q523.4297,455.4146 522.7449,456.4812 Q522.0601,457.5479 522.0601,459.6479 Q522.0601,461.7397 522.7449,462.8064 Q523.4297,463.873 524.7744,463.873 Q525.4053,463.873 525.9988,463.6033 Q526.5923,463.3335 527.2231,462.7524 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="545.25" y="464.623">SerializerFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="272.5" x2="899.5" y1="475.332" y2="475.332"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="279.5" y="483.332"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="603" x="291.5" y="492.8672">WeakHashMap&lt;ClassLoader, SoftReference&lt;SerializerFactory&gt;&gt; _defaultFactoryRefMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="279.5" y="499.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="282" x="291.5" y="509.3555">ContextSerializerFactory _contextFactory</text><polygon fill="none" points="282.5,514.3086,286.5,518.3086,282.5,522.3086,278.5,518.3086" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="291.5" y="525.8438">Serializer _defaultSerializer</text><polygon fill="none" points="282.5,530.7969,286.5,534.7969,282.5,538.7969,278.5,534.7969" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="266" x="291.5" y="542.332">ArrayList&lt;SerializerFactory&gt; _factories</text><polygon fill="none" points="282.5,547.2852,286.5,551.2852,282.5,555.2852,278.5,551.2852" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="274" x="291.5" y="558.8203">CollectionSerializer _collectionSerializer</text><polygon fill="none" points="282.5,563.7734,286.5,567.7734,282.5,571.7734,278.5,567.7734" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="198" x="291.5" y="575.3086">MapSerializer _mapSerializer</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="279.5" y="582.2617"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="235" x="291.5" y="591.7969">Deserializer _hashMapDeserializer</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="279.5" y="598.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="231" x="291.5" y="608.2852">Deserializer _arrayListDeserializer</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="279.5" y="615.2383"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="423" x="291.5" y="624.7734">ConcurrentHashMap&lt;Class, Serializer&gt; _cachedSerializerMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="279.5" y="631.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="457" x="291.5" y="641.2617">ConcurrentHashMap&lt;Class, Deserializer&gt; _cachedDeserializerMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="279.5" y="648.2148"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="417" x="291.5" y="657.75">HashMap&lt;String, Deserializer&gt; _cachedTypeDeserializerMap</text><line style="stroke:#181818;stroke-width:0.5;" x1="272.5" x2="899.5" y1="664.7031" y2="664.7031"/><ellipse cx="282.5" cy="675.7031" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="341" x="291.5" y="682.2383">void addFactory(AbstractSerializerFactory factory)</text><ellipse cx="282.5" cy="692.1914" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="219" x="291.5" y="698.7266">SerializerFactory createDefault()</text></g><!--MD5=[4dbfc8701120294435d217b47710be74]
class AbstractHessianOutput--><g id="elem_AbstractHessianOutput"><rect codeLine="18" fill="#F1F1F1" height="130.4414" id="AbstractHessianOutput" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="335" x="418.5" y="63.332"/><ellipse cx="502.75" cy="79.332" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M502.6133,74.6802 L501.4595,79.752 L503.7754,79.752 Z M501.1191,72.439 L504.1157,72.439 L507.4609,84.832 L505.0122,84.832 L504.2485,81.769 L500.9697,81.769 L500.2227,84.832 L497.7739,84.832 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="158" x="523.25" y="84.623">AbstractHessianOutput</text><line style="stroke:#181818;stroke-width:0.5;" x1="419.5" x2="752.5" y1="95.332" y2="95.332"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="426.5" y="103.332"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="287" x="438.5" y="112.8672">SerializerFactory _defaultSerializerFactory</text><polygon fill="none" points="429.5,117.8203,433.5,121.8203,429.5,125.8203,425.5,121.8203" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="238" x="438.5" y="129.3555">SerializerFactory _serializerFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="419.5" x2="752.5" y1="136.3086" y2="136.3086"/><ellipse cx="429.5" cy="147.3086" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="309" x="438.5" y="153.8438">setSerializerFactory(SerializerFactory factory)</text><ellipse cx="429.5" cy="163.7969" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="264" x="438.5" y="170.332">SerializerFactory getSerializerFactory()</text><polygon fill="#FFFF44" points="429.5,175.2852,433.5,179.2852,429.5,183.2852,425.5,179.2852" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="269" x="438.5" y="186.8203">SerializerFactory findSerializerFactory()</text></g><!--MD5=[38f80e5fbd3f81f352db392a0c46c8a8]
class Hessian2Output--><g id="elem_Hessian2Output"><rect codeLine="28" fill="#F1F1F1" height="48" id="Hessian2Output" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="391" y="294.332"/><ellipse cx="406" cy="310.332" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M408.4731,316.4751 Q407.8921,316.7739 407.2529,316.9233 Q406.6138,317.0728 405.9082,317.0728 Q403.4014,317.0728 402.0815,315.4209 Q400.7617,313.769 400.7617,310.6479 Q400.7617,307.5186 402.0815,305.8667 Q403.4014,304.2148 405.9082,304.2148 Q406.6138,304.2148 407.2612,304.3643 Q407.9087,304.5137 408.4731,304.8125 L408.4731,307.5352 Q407.8423,306.9541 407.2488,306.6843 Q406.6553,306.4146 406.0244,306.4146 Q404.6797,306.4146 403.9949,307.4812 Q403.3101,308.5479 403.3101,310.6479 Q403.3101,312.7397 403.9949,313.8064 Q404.6797,314.873 406.0244,314.873 Q406.6553,314.873 407.2488,314.6033 Q407.8423,314.3335 408.4731,313.7524 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="420" y="315.623">Hessian2Output</text><line style="stroke:#181818;stroke-width:0.5;" x1="392" x2="532" y1="326.332" y2="326.332"/><line style="stroke:#181818;stroke-width:0.5;" x1="392" x2="532" y1="334.332" y2="334.332"/></g><!--MD5=[58e8cfe03e652d9b9e2d1201250d0be2]
class AbstractSerializerFactory--><g id="elem_AbstractSerializerFactory"><rect codeLine="30" fill="#F1F1F1" height="80.9766" id="AbstractSerializerFactory" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="275" x="639.5" y="277.832"/><ellipse cx="687.25" cy="293.832" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M687.1133,289.1802 L685.9595,294.252 L688.2754,294.252 Z M685.6191,286.939 L688.6157,286.939 L691.9609,299.332 L689.5122,299.332 L688.7485,296.269 L685.4697,296.269 L684.7227,299.332 L682.2739,299.332 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="171" x="707.75" y="299.123">AbstractSerializerFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="640.5" x2="913.5" y1="309.832" y2="309.832"/><line style="stroke:#181818;stroke-width:0.5;" x1="640.5" x2="913.5" y1="317.832" y2="317.832"/><ellipse cx="650.5" cy="328.832" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="215" x="659.5" y="335.3672">Serializer getSerializer(Class cl)</text><ellipse cx="650.5" cy="345.3203" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="249" x="659.5" y="351.8555">Deserializer getDeserializer(Class cl)</text></g><!--MD5=[0e2e915064bf2e2ee735763ff21e6466]
class Serializer--><g id="elem_Serializer"><rect codeLine="51" fill="#F1F1F1" height="64.4883" id="Serializer" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="410" x="123" y="839.832"/><ellipse cx="291.75" cy="855.832" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M288.1777,852.0972 L288.1777,849.939 L295.5571,849.939 L295.5571,852.0972 L293.0918,852.0972 L293.0918,860.1738 L295.5571,860.1738 L295.5571,862.332 L288.1777,862.332 L288.1777,860.1738 L290.6431,860.1738 L290.6431,852.0972 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="64" x="312.25" y="861.123">Serializer</text><line style="stroke:#181818;stroke-width:0.5;" x1="124" x2="532" y1="871.832" y2="871.832"/><line style="stroke:#181818;stroke-width:0.5;" x1="124" x2="532" y1="879.832" y2="879.832"/><ellipse cx="134" cy="890.832" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="384" x="143" y="897.3672">void writeObject(Object obj, AbstractHessianOutput out)</text></g><!--MD5=[404dae31c59c293c2ccca76809bb9a71]
class AbstractSerializer--><g id="elem_AbstractSerializer"><rect codeLine="54" fill="#F1F1F1" height="48" id="AbstractSerializer" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153" x="78.5" y="1161.832"/><ellipse cx="93.5" cy="1177.832" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M93.3633,1173.1802 L92.2095,1178.252 L94.5254,1178.252 Z M91.8691,1170.939 L94.8657,1170.939 L98.2109,1183.332 L95.7622,1183.332 L94.9985,1180.269 L91.7197,1180.269 L90.9727,1183.332 L88.5239,1183.332 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="121" x="107.5" y="1183.123">AbstractSerializer</text><line style="stroke:#181818;stroke-width:0.5;" x1="79.5" x2="230.5" y1="1193.832" y2="1193.832"/><line style="stroke:#181818;stroke-width:0.5;" x1="79.5" x2="230.5" y1="1201.832" y2="1201.832"/></g><!--MD5=[2e3e9d812ecad44a698ffbd8b3f5e9db]
class Deserializer--><g id="elem_Deserializer"><rect codeLine="56" fill="#F1F1F1" height="212.8828" id="Deserializer" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="461" x="639.5" y="765.332"/><ellipse cx="825.25" cy="781.332" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M821.6777,777.5972 L821.6777,775.439 L829.0571,775.439 L829.0571,777.5972 L826.5918,777.5972 L826.5918,785.6738 L829.0571,785.6738 L829.0571,787.832 L821.6777,787.832 L821.6777,785.6738 L824.1431,785.6738 L824.1431,777.5972 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="81" x="845.75" y="786.623">Deserializer</text><line style="stroke:#181818;stroke-width:0.5;" x1="640.5" x2="1099.5" y1="797.332" y2="797.332"/><line style="stroke:#181818;stroke-width:0.5;" x1="640.5" x2="1099.5" y1="805.332" y2="805.332"/><ellipse cx="650.5" cy="816.332" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="659.5" y="822.8672">Class&lt;?&gt; getType()</text><ellipse cx="650.5" cy="832.8203" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="659.5" y="839.3555">boolean isReadResolve()</text><ellipse cx="650.5" cy="849.3086" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="296" x="659.5" y="855.8438">Object readObject(AbstractHessianInput in)</text><ellipse cx="650.5" cy="865.7969" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="349" x="659.5" y="872.332">Object readList(AbstractHessianInput in, int length)</text><ellipse cx="650.5" cy="882.2852" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="396" x="659.5" y="888.8203">Object readLengthList(AbstractHessianInput in, int length)</text><ellipse cx="650.5" cy="898.7734" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="281" x="659.5" y="905.3086">Object readMap(AbstractHessianInput in)</text><ellipse cx="650.5" cy="915.2617" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="193" x="659.5" y="921.7969">Object[] createFields(int len)</text><ellipse cx="650.5" cy="931.75" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="216" x="659.5" y="938.2852">Object createField(String name)</text><ellipse cx="650.5" cy="948.2383" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="399" x="659.5" y="954.7734">Object readObject(AbstractHessianInput in, Object[] fields)</text><ellipse cx="650.5" cy="964.7266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="435" x="659.5" y="971.2617">Object readObject(AbstractHessianInput in, String[] fieldNames)</text></g><!--MD5=[8dd192c69c3aebee6dcc238c8897e49f]
class AbstractDeserializer--><g id="elem_AbstractDeserializer"><rect codeLine="68" fill="#F1F1F1" height="48" id="AbstractDeserializer" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170" x="1249" y="1161.832"/><ellipse cx="1264" cy="1177.832" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1266.4731,1183.9751 Q1265.8921,1184.2739 1265.2529,1184.4233 Q1264.6138,1184.5728 1263.9082,1184.5728 Q1261.4014,1184.5728 1260.0815,1182.9209 Q1258.7617,1181.269 1258.7617,1178.1479 Q1258.7617,1175.0186 1260.0815,1173.3667 Q1261.4014,1171.7148 1263.9082,1171.7148 Q1264.6138,1171.7148 1265.2612,1171.8643 Q1265.9087,1172.0137 1266.4731,1172.3125 L1266.4731,1175.0352 Q1265.8423,1174.4541 1265.2488,1174.1843 Q1264.6553,1173.9146 1264.0244,1173.9146 Q1262.6797,1173.9146 1261.9949,1174.9812 Q1261.3101,1176.0479 1261.3101,1178.1479 Q1261.3101,1180.2397 1261.9949,1181.3064 Q1262.6797,1182.373 1264.0244,1182.373 Q1264.6553,1182.373 1265.2488,1182.1033 Q1265.8423,1181.8335 1266.4731,1181.2524 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="1278" y="1183.123">AbstractDeserializer</text><line style="stroke:#181818;stroke-width:0.5;" x1="1250" x2="1418" y1="1193.832" y2="1193.832"/><line style="stroke:#181818;stroke-width:0.5;" x1="1250" x2="1418" y1="1201.832" y2="1201.832"/></g><!--MD5=[660438e3bfbdf387ea02a715c3723cd6]
class ContextSerializerFactory--><g id="elem_ContextSerializerFactory"><rect codeLine="81" fill="#F1F1F1" height="295.3242" id="ContextSerializerFactory" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="638" x="267" y="1038.332"/><ellipse cx="497.25" cy="1054.332" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M499.7231,1060.4751 Q499.1421,1060.7739 498.5029,1060.9233 Q497.8638,1061.0728 497.1582,1061.0728 Q494.6514,1061.0728 493.3315,1059.4209 Q492.0117,1057.769 492.0117,1054.6479 Q492.0117,1051.5186 493.3315,1049.8667 Q494.6514,1048.2148 497.1582,1048.2148 Q497.8638,1048.2148 498.5112,1048.3643 Q499.1587,1048.5137 499.7231,1048.8125 L499.7231,1051.5352 Q499.0923,1050.9541 498.4988,1050.6843 Q497.9053,1050.4146 497.2744,1050.4146 Q495.9297,1050.4146 495.2449,1051.4812 Q494.5601,1052.5479 494.5601,1054.6479 Q494.5601,1056.7397 495.2449,1057.8064 Q495.9297,1058.873 497.2744,1058.873 Q497.9053,1058.873 498.4988,1058.6033 Q499.0923,1058.3335 499.7231,1057.7524 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169" x="517.75" y="1059.623">ContextSerializerFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="268" x2="904" y1="1070.332" y2="1070.332"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="275" y="1078.332"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="612" x="287" y="1087.8672">WeakHashMap&lt;ClassLoader, SoftReference&lt;ContextSerializerFactory&gt;&gt; _contextRefMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="275" y="1094.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="334" x="287" y="1104.3555">HashMap&lt;String,Serializer&gt; _staticSerializerMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="275" y="1111.3086"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="368" x="287" y="1120.8438">HashMap&lt;String,Deserializer&gt; _staticDeserializerMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="275" y="1127.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="225" x="287" y="1137.332">ContextSerializerFactory _parent</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="275" y="1144.2852"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="337" x="287" y="1153.8203">HashMap&lt;String, Serializer&gt; _serializerClassMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="275" y="1160.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="430" x="287" y="1170.3086">ConcurrentHashMap&lt;String, Serializer&gt; _customSerializerMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="275" y="1177.2617"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="384" x="287" y="1186.7969">HashMap&lt;Class&lt;?&gt;, Serializer&gt; _serializerInterfaceMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="275" y="1193.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="371" x="287" y="1203.2852">HashMap&lt;String, Deserializer&gt; _deserializerClassMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="275" y="1210.2383"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="410" x="287" y="1219.7734">HashMap&lt;String, Deserializer&gt; _deserializerClassNameMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="275" y="1226.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="464" x="287" y="1236.2617">ConcurrentHashMap&lt;String, Deserializer&gt; _customDeserializerMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="275" y="1243.2148"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="418" x="287" y="1252.75">HashMap&lt;Class&lt;?&gt;, Deserializer&gt; _deserializerInterfaceMap</text><line style="stroke:#181818;stroke-width:0.5;" x1="268" x2="904" y1="1259.7031" y2="1259.7031"/><ellipse cx="278" cy="1270.7031" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="281" x="287" y="1277.2383">Serializer getSerializer(String className)</text><ellipse cx="278" cy="1287.1914" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="268" x="287" y="1293.7266">Serializer getCustomSerializer(Class cl)</text><ellipse cx="278" cy="1303.6797" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="315" x="287" y="1310.2148">Deserializer getDeserializer(String className)</text><ellipse cx="278" cy="1320.168" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="287" y="1326.7031">Deserializer getCustomDeserializer(Class cl)</text></g><path d="M958.5,1127.332 L958.5,1143.6426 L621,1099.0645 L958.5,1151.6426 L958.5,1167.9531 A0,0 0 0 0 958.5,1167.9531 L1213.5,1167.9531 A0,0 0 0 0 1213.5,1167.9531 L1213.5,1137.332 L1203.5,1127.332 L958.5,1127.332 A0,0 0 0 0 958.5,1127.332 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1203.5,1127.332 L1203.5,1137.332 L1213.5,1137.332 L1203.5,1127.332 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234" x="964.5" y="1144.9004">启动时，会将基本类型、字符串和对象的</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="964.5" y="1160.2109">Serializer 实现类添加到该字段中。</text><path d="M958.5,1177.9531 L958.5,1201.9189 L624,1148.5293 L958.5,1209.9189 L958.5,1233.8848 A0,0 0 0 0 958.5,1233.8848 L1200.5,1233.8848 A0,0 0 0 0 1200.5,1233.8848 L1200.5,1187.9531 L1190.5,1177.9531 L958.5,1177.9531 A0,0 0 0 0 958.5,1177.9531 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1190.5,1177.9531 L1190.5,1187.9531 L1200.5,1187.9531 L1190.5,1177.9531 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="964.5" y="1195.5215">创建对象时，将 _staticSerializerMap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="964.5" y="1210.832">的数据，完整添加到该字段，后续查找</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="964.5" y="1226.1426">Serializer，也是从该字段中查找。</text><!--MD5=[694d2f8ea33a0523208455f880d0960c]
reverse link AbstractHessianInput to Hessian2Input--><g id="link_AbstractHessianInput_Hessian2Input"><path d="M116.14,170.492 C128,194.722 143.25,225.892 156.65,253.272 " fill="none" id="AbstractHessianInput-backto-Hessian2Input" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="109.78,173.422,107.28,152.382,122.36,167.272,109.78,173.422" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[d5f03ce4f73e745d716fb3b99ec73414]
reverse link Hessian2Constants to Hessian2Input--><g id="link_Hessian2Constants_Hessian2Input"><path d="M277.48,169.772 C262.72,194.102 243.61,225.622 226.84,253.272 " fill="none" id="Hessian2Constants-backto-Hessian2Input" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="271.67,165.852,288.02,152.382,283.64,173.112,271.67,165.852" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[7e2d63357847553087310b12648226d9]
reverse link Hessian2Input to SerializerFactory--><g id="link_Hessian2Input_SerializerFactory"><path codeLine="14" d="M299.69,390.612 C325.44,407.042 353.61,425.022 381.93,443.092 " fill="none" id="Hessian2Input-backto-SerializerFactory" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="288.43,383.422,291.3328,390.0231,298.5425,389.8824,295.6397,383.2814,288.43,383.422" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="291.5797" y="404.376">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="361.901" y="432.6384">1</text></g><!--MD5=[cafa6d060d71a221f6d5ff70431a58d2]
reverse link AbstractHessianOutput to SerializerFactory--><g id="link_AbstractHessianOutput_SerializerFactory"><path codeLine="26" d="M586,206.452 C586,271.642 586,366.422 586,443.312 " fill="none" id="AbstractHessianOutput-backto-SerializerFactory" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="586,193.422,582,199.422,586,205.422,590,199.422,586,193.422" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="577.5375" y="214.376">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="577.7563" y="432.4382">1</text></g><!--MD5=[b60593531d8ba26640c5d20b59d4e447]
reverse link AbstractHessianOutput to Hessian2Output--><g id="link_AbstractHessianOutput_Hessian2Output"><path d="M532.44,210.542 C512.46,240.822 491.3,272.902 477.45,293.912 " fill="none" id="AbstractHessianOutput-backto-Hessian2Output" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="526.82,206.342,543.67,193.502,538.5,214.052,526.82,206.342" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[ac2e81f68f0e8090007493256e23bb7c]
reverse link Hessian2Constants to Hessian2Output--><g id="link_Hessian2Constants_Hessian2Output"><path d="M334.79,167.862 C367.09,205.812 415.38,262.562 442.22,294.092 " fill="none" id="Hessian2Constants-backto-Hessian2Output" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="329.25,172.152,321.62,152.382,339.91,163.082,329.25,172.152" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[8fc1c8d6cb1d9ae3ceebfedbbc619d8c]
reverse link AbstractSerializerFactory to SerializerFactory--><g id="link_AbstractSerializerFactory_SerializerFactory"><path d="M735.05,375.122 C719.82,395.372 701.91,419.192 683.88,443.172 " fill="none" id="AbstractSerializerFactory-backto-SerializerFactory" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="729.54,370.802,747.16,359.022,740.73,379.212,729.54,370.802" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[8d1cb1ce662ef78ffa2bc2ec39d2d9f8]
reverse link Serializer to AbstractSerializer--><g id="link_Serializer_AbstractSerializer"><path d="M300.94,921.632 C263.09,989.902 195.82,1111.212 167.8,1161.742 " fill="none" id="Serializer-backto-AbstractSerializer" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="294.96,917.982,310.78,903.892,307.2,924.772,294.96,917.982" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[fc5dcc99e2c1ad11d6db1f50cc8fe31b]
reverse link Deserializer to AbstractDeserializer--><g id="link_Deserializer_AbstractDeserializer"><path d="M1118.8,965.602 C1158.51,986.242 1197.49,1010.452 1231,1038.332 C1273.3,1073.532 1306.35,1130.092 1322.71,1161.642 " fill="none" id="Deserializer-backto-AbstractDeserializer" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1115.53,971.792,1100.84,956.522,1121.84,959.292,1115.53,971.792" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[176a14353680acde457697ba65a5d480]
link Serializer to ContextSerializerFactory--><g id="link_Serializer_ContextSerializerFactory"><path codeLine="70" d="M353.68,903.892 C378.25,933.602 417.26,980.772 456.34,1028.042 " fill="none" id="Serializer-to-ContextSerializerFactory" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="464.68,1038.122,463.937,1030.9493,457.0303,1028.8764,457.7733,1036.0491,464.68,1038.122" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="10" x="348.2038" y="925.0947">N</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="450.2182" y="1027.687">1</text></g><!--MD5=[2dd962366980a83d75e985ed95b54777]
reverse link SerializerFactory to SerializerFactory--><g id="link_SerializerFactory_SerializerFactory"><path codeLine="72" d="M912.69,544.802 C927.1,552.332 935.5,562.182 935.5,574.332 C935.5,589.582 922.27,601.202 900.54,609.182 " fill="none" id="SerializerFactory-backto-SerializerFactory" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="900.54,539.482,904.439,545.5481,911.5381,544.2822,907.6391,538.2161,900.54,539.482" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="908.0058" y="536.0574">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="10" x="908.0292" y="607.391">N</text></g><!--MD5=[66aa397faf94e9d41bf66269678e7127]
reverse link SerializerFactory to ContextSerializerFactory--><g id="link_SerializerFactory_ContextSerializerFactory"><path codeLine="73" d="M586,718.412 C586,814.662 586,941.192 586,1038.182 " fill="none" id="SerializerFactory-backto-ContextSerializerFactory" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="586,705.342,582,711.342,586,717.342,590,711.342,586,705.342" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="577.7563" y="726.3497">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="577.7938" y="1027.7501">1</text></g><!--MD5=[e34355a110e4663a5b910682c3429a6a]
reverse link SerializerFactory to Serializer--><g id="link_SerializerFactory_Serializer"><path codeLine="76" d="M463.79,715.302 C423.07,761.952 381.43,809.632 355.19,839.682 " fill="none" id="SerializerFactory-backto-Serializer" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="472.46,705.372,465.5006,707.2607,464.5673,714.4111,471.5267,712.5225,472.46,705.372" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="457.2974" y="726.3815">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="10" x="349.7667" y="829.0542">N</text></g><!--MD5=[be20fd233fdca0abcd219123393b8bec]
reverse link SerializerFactory to Deserializer--><g id="link_SerializerFactory_Deserializer"><path codeLine="77" d="M720,714.762 C736.28,731.702 752.7,748.782 768.4,765.122 " fill="none" id="SerializerFactory-backto-Deserializer" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="710.98,705.372,712.2566,712.4692,719.2989,714.0205,718.0223,706.9233,710.98,705.372" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="710.3522" y="726.3815">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="10" x="750.9047" y="754.675">N</text></g><!--MD5=[665e947610ef1c6326f69964e29660e4]
link Deserializer to ContextSerializerFactory--><g id="link_Deserializer_ContextSerializerFactory"><path codeLine="79" d="M773.85,978.462 C759.26,994.492 743.94,1011.322 728.61,1028.162 " fill="none" id="Deserializer-to-ContextSerializerFactory" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="719.59,1038.072,726.5861,1036.3241,727.6634,1029.1939,720.6673,1030.9419,719.59,1038.072" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="10" x="757.054" y="998.7129">N</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="718.272" y="1027.6344">1</text></g><!--MD5=[6069e47152dd842c8cf4b662ccbdd7d7]
reverse link ContextSerializerFactory to ContextSerializerFactory--><g id="link_ContextSerializerFactory_ContextSerializerFactory"><path codeLine="108" d="M916.83,1149.562 C931.47,1158.812 940,1170.902 940,1185.832 C940,1204.382 926.82,1218.552 905.13,1228.332 " fill="none" id="ContextSerializerFactory-backto-ContextSerializerFactory" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="905.13,1143.332,908.5434,1149.6841,915.7197,1148.9764,912.3063,1142.6243,905.13,1143.332" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="912.7034" y="1139.7284">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="10" x="912.7268" y="1226.7205">N</text></g><rect height="23.5547" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="381" x="515.5" y="1339.6563"/><text fill="#888888" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="381" x="515.5" y="1358.9922">D瓜哥 · https://www.diguage.com · 出品</text><!--MD5=[3677516abaa78130cdf65bbfc6012992]
@startuml
skinparam titleFontSize 30
title **Hessian 架构**

abstract class AbstractHessianInput

class Hessian2Input extends AbstractHessianInput implements Hessian2Constants {
  #SerializerFactory _defaultSerializerFactory
  #SerializerFactory _serializerFactory;
  +setSerializerFactory(SerializerFactory factory)
  +SerializerFactory getSerializerFactory()
  #SerializerFactory findSerializerFactory()
}

Hessian2Input "1" o- - "1" SerializerFactory



abstract class AbstractHessianOutput {
  -SerializerFactory _defaultSerializerFactory
  #SerializerFactory _serializerFactory
  +setSerializerFactory(SerializerFactory factory)
  +SerializerFactory getSerializerFactory()
  #SerializerFactory findSerializerFactory()
}

AbstractHessianOutput "1" o- - "1" SerializerFactory

class Hessian2Output extends AbstractHessianOutput implements Hessian2Constants

abstract class AbstractSerializerFactory {
  +{abstract} Serializer getSerializer(Class cl)
  +{abstract} Deserializer getDeserializer(Class cl)
}

class SerializerFactory extends AbstractSerializerFactory {
  -{static} WeakHashMap<ClassLoader, SoftReference<SerializerFactory>> _defaultFactoryRefMap
  -ContextSerializerFactory _contextFactory
  #Serializer _defaultSerializer
  #ArrayList<SerializerFactory> _factories
  #CollectionSerializer _collectionSerializer
  #MapSerializer _mapSerializer
  -Deserializer _hashMapDeserializer
  -Deserializer _arrayListDeserializer
  -ConcurrentHashMap<Class, Serializer> _cachedSerializerMap
  -ConcurrentHashMap<Class, Deserializer> _cachedDeserializerMap
  -HashMap<String, Deserializer> _cachedTypeDeserializerMap
  +void addFactory(AbstractSerializerFactory factory)
  +{static}SerializerFactory createDefault()
}

interface Serializer {
  +void writeObject(Object obj, AbstractHessianOutput out)
}
abstract class AbstractSerializer implements Serializer

interface Deserializer {
  + Class<?> getType()
  + boolean isReadResolve()
  + Object readObject(AbstractHessianInput in)
  + Object readList(AbstractHessianInput in, int length)
  + Object readLengthList(AbstractHessianInput in, int length)
  + Object readMap(AbstractHessianInput in)
  + Object[] createFields(int len)
  + Object createField(String name)
  + Object readObject(AbstractHessianInput in, Object[] fields)
  + Object readObject(AbstractHessianInput in, String[] fieldNames)
}
class AbstractDeserializer implements Deserializer

Serializer "N" - -o "1" ContextSerializerFactory

SerializerFactory "1" o- - "N" SerializerFactory
SerializerFactory "1" o- - "1" ContextSerializerFactory


SerializerFactory "1" o- - "N" Serializer
SerializerFactory "1" o- - "N" Deserializer

Deserializer "N" - -o "1" ContextSerializerFactory

class ContextSerializerFactory {
  -{static} WeakHashMap<ClassLoader, SoftReference<ContextSerializerFactory>> _contextRefMap
  -{static} HashMap<String,Serializer> _staticSerializerMap
  -{static} HashMap<String,Deserializer> _staticDeserializerMap
  -ContextSerializerFactory _parent
  -HashMap<String, Serializer> _serializerClassMap
  -ConcurrentHashMap<String, Serializer> _customSerializerMap
  -HashMap<Class<?>, Serializer> _serializerInterfaceMap
  -HashMap<String, Deserializer> _deserializerClassMap
  -HashMap<String, Deserializer> _deserializerClassNameMap
  -ConcurrentHashMap<String, Deserializer> _customDeserializerMap
  -HashMap<Class<?>, Deserializer> _deserializerInterfaceMap
  +Serializer getSerializer(String className)
  +Serializer getCustomSerializer(Class cl)
  +Deserializer getDeserializer(String className)
  +Deserializer getCustomDeserializer(Class cl)
}
note right of ContextSerializerFactory::_staticSerializerMap
  启动时，会将基本类型、字符串和对象的
  Serializer 实现类添加到该字段中。
end note
note right of ContextSerializerFactory::_serializerClassMap
  创建对象时，将 _staticSerializerMap
  的数据，完整添加到该字段，后续查找
  Serializer，也是从该字段中查找。
end note

ContextSerializerFactory "1" o- - "N" ContextSerializerFactory


skinparam footerFontSize 20
footer D瓜哥 · https://www.diguage.com · 出品
@enduml

PlantUML version 1.2022.5(Sat Apr 30 18:55:52 CST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: CN
--></g></svg>