<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1615px" preserveAspectRatio="none" style="width:1750px;height:1615px;background:#FFFFFF;" version="1.1" viewBox="0 0 1750 1615" width="1750px" zoomAndPan="magnify"><defs/><g><rect height="52.3984" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="240" x="748.25" y="5"/><text fill="#000000" font-family="'Source" font-size="36" font-weight="bold" lengthAdjust="spacing" textLength="230" x="753.25" y="44.8047">Hessian 架构</text><!--MD5=[0cd3f7edc610ca4d33c23c1943415164]
class AbstractHessianInput--><g id="elem_AbstractHessianInput"><rect codeLine="3" fill="#F1F1F1" height="50" id="AbstractHessianInput" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="218" x="7" y="123.3984"/><ellipse cx="23" cy="140.3984" fill="#A9DCDF" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M22.9141,135.6494 L21.6924,141.0195 L24.1445,141.0195 Z M21.332,133.2764 L24.5049,133.2764 L28.0469,146.3984 L25.4541,146.3984 L24.6455,143.1553 L21.1738,143.1553 L20.3828,146.3984 L17.79,146.3984 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" font-style="italic" lengthAdjust="spacing" textLength="184" x="38" y="147.2012">AbstractHessianInput</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="224" y1="157.3984" y2="157.3984"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="224" y1="165.3984" y2="165.3984"/></g><!--MD5=[3dcd6432be4763f09dce15986ddfbf6e]
class Hessian2Input--><g id="elem_Hessian2Input"><rect codeLine="5" fill="#F1F1F1" height="155.9961" id="Hessian2Input" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="415" x="25.5" y="286.3984"/><ellipse cx="167" cy="303.3984" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M169.501,309.5205 Q168.8857,309.8369 168.209,309.9951 Q167.5322,310.1533 166.7852,310.1533 Q164.1309,310.1533 162.7334,308.4043 Q161.3359,306.6553 161.3359,303.3506 Q161.3359,300.0371 162.7334,298.2881 Q164.1309,296.5391 166.7852,296.5391 Q167.5322,296.5391 168.2178,296.6973 Q168.9033,296.8555 169.501,297.1719 L169.501,300.0547 Q168.833,299.4395 168.2046,299.1538 Q167.5762,298.8682 166.9082,298.8682 Q165.4844,298.8682 164.7593,299.9976 Q164.0342,301.127 164.0342,303.3506 Q164.0342,305.5654 164.7593,306.6948 Q165.4844,307.8242 166.9082,307.8242 Q167.5762,307.8242 168.2046,307.5386 Q168.833,307.2529 169.501,306.6377 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="123" x="189" y="310.2012">Hessian2Input</text><line style="stroke:#181818;stroke-width:0.5;" x1="26.5" x2="439.5" y1="320.3984" y2="320.3984"/><polygon fill="none" points="36.5,326.3984,40.5,330.3984,36.5,334.3984,32.5,330.3984" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="360" x="46.5" y="341.8008">SerializerFactory _defaultSerializerFactory</text><polygon fill="none" points="36.5,347.5977,40.5,351.5977,36.5,355.5977,32.5,351.5977" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="304" x="46.5" y="363">SerializerFactory _serializerFactory;</text><line style="stroke:#181818;stroke-width:0.5;" x1="26.5" x2="439.5" y1="370.7969" y2="370.7969"/><ellipse cx="36.5" cy="381.7969" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="388" x="46.5" y="392.1992">setSerializerFactory(SerializerFactory factory)</text><ellipse cx="36.5" cy="402.9961" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="330" x="46.5" y="413.3984">SerializerFactory getSerializerFactory()</text><polygon fill="#FFFF44" points="36.5,419.1953,40.5,423.1953,36.5,427.1953,32.5,423.1953" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="336" x="46.5" y="434.5977">SerializerFactory findSerializerFactory()</text></g><!--MD5=[74c36771e2d1d14c81d6e5c916f77cda]
class Hessian2Constants--><g id="elem_Hessian2Constants"><rect fill="#F1F1F1" height="50" id="Hessian2Constants" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="199" x="260.5" y="123.3984"/><ellipse cx="276.5" cy="140.3984" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M272.5117,136.3115 L272.5117,134.0264 L280.3252,134.0264 L280.3252,136.3115 L277.7148,136.3115 L277.7148,144.8633 L280.3252,144.8633 L280.3252,147.1484 L272.5117,147.1484 L272.5117,144.8633 L275.1221,144.8633 L275.1221,136.3115 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" font-style="italic" lengthAdjust="spacing" textLength="165" x="291.5" y="147.2012">Hessian2Constants</text><line style="stroke:#181818;stroke-width:0.5;" x1="261.5" x2="458.5" y1="157.3984" y2="157.3984"/><line style="stroke:#181818;stroke-width:0.5;" x1="261.5" x2="458.5" y1="165.3984" y2="165.3984"/></g><!--MD5=[0c6497a22e8a9ff169605329b1f434f9]
class SerializerFactory--><g id="elem_SerializerFactory"><rect codeLine="34" fill="#F1F1F1" height="325.5898" id="SerializerFactory" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="791" x="306.5" y="502.3984"/><ellipse cx="626.5" cy="519.3984" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M629.001,525.5205 Q628.3857,525.8369 627.709,525.9951 Q627.0322,526.1533 626.2852,526.1533 Q623.6309,526.1533 622.2334,524.4043 Q620.8359,522.6553 620.8359,519.3506 Q620.8359,516.0371 622.2334,514.2881 Q623.6309,512.5391 626.2852,512.5391 Q627.0322,512.5391 627.7178,512.6973 Q628.4033,512.8555 629.001,513.1719 L629.001,516.0547 Q628.333,515.4395 627.7046,515.1538 Q627.0762,514.8682 626.4082,514.8682 Q624.9844,514.8682 624.2593,515.9976 Q623.5342,517.127 623.5342,519.3506 Q623.5342,521.5654 624.2593,522.6948 Q624.9844,523.8242 626.4082,523.8242 Q627.0762,523.8242 627.7046,523.5386 Q628.333,523.2529 629.001,522.6377 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="142" x="648.5" y="526.2012">SerializerFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="307.5" x2="1096.5" y1="536.3984" y2="536.3984"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="314.5" y="544.3984"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" text-decoration="underline" textLength="764" x="327.5" y="557.8008">WeakHashMap&lt;ClassLoader, SoftReference&lt;SerializerFactory&gt;&gt; _defaultFactoryRefMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="314.5" y="565.5977"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="355" x="327.5" y="579">ContextSerializerFactory _contextFactory</text><polygon fill="none" points="317.5,584.7969,321.5,588.7969,317.5,592.7969,313.5,588.7969" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="234" x="327.5" y="600.1992">Serializer _defaultSerializer</text><polygon fill="none" points="317.5,605.9961,321.5,609.9961,317.5,613.9961,313.5,609.9961" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="336" x="327.5" y="621.3984">ArrayList&lt;SerializerFactory&gt; _factories</text><polygon fill="none" points="317.5,627.1953,321.5,631.1953,317.5,635.1953,313.5,631.1953" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="342" x="327.5" y="642.5977">CollectionSerializer _collectionSerializer</text><polygon fill="none" points="317.5,648.3945,321.5,652.3945,317.5,656.3945,313.5,652.3945" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="248" x="327.5" y="663.7969">MapSerializer _mapSerializer</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="314.5" y="671.5938"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="295" x="327.5" y="684.9961">Deserializer _hashMapDeserializer</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="314.5" y="692.793"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="291" x="327.5" y="706.1953">Deserializer _arrayListDeserializer</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="314.5" y="713.9922"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="531" x="327.5" y="727.3945">ConcurrentHashMap&lt;Class, Serializer&gt; _cachedSerializerMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="314.5" y="735.1914"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="575" x="327.5" y="748.5938">ConcurrentHashMap&lt;Class, Deserializer&gt; _cachedDeserializerMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="314.5" y="756.3906"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="526" x="327.5" y="769.793">HashMap&lt;String, Deserializer&gt; _cachedTypeDeserializerMap</text><line style="stroke:#181818;stroke-width:0.5;" x1="307.5" x2="1096.5" y1="777.5898" y2="777.5898"/><ellipse cx="317.5" cy="788.5898" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="429" x="327.5" y="798.9922">void addFactory(AbstractSerializerFactory factory)</text><ellipse cx="317.5" cy="809.7891" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" text-decoration="underline" textLength="276" x="327.5" y="820.1914">SerializerFactory createDefault()</text></g><!--MD5=[4dbfc8701120294435d217b47710be74]
class AbstractHessianOutput--><g id="elem_AbstractHessianOutput"><rect codeLine="17" fill="#F1F1F1" height="155.9961" id="AbstractHessianOutput" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="415" x="494.5" y="70.3984"/><ellipse cx="597.5" cy="87.3984" fill="#A9DCDF" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M597.4141,82.6494 L596.1924,88.0195 L598.6445,88.0195 Z M595.832,80.2764 L599.0049,80.2764 L602.5469,93.3984 L599.9541,93.3984 L599.1455,90.1553 L595.6738,90.1553 L594.8828,93.3984 L592.29,93.3984 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" font-style="italic" lengthAdjust="spacing" textLength="200" x="619.5" y="94.2012">AbstractHessianOutput</text><line style="stroke:#181818;stroke-width:0.5;" x1="495.5" x2="908.5" y1="104.3984" y2="104.3984"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="502.5" y="112.3984"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="360" x="515.5" y="125.8008">SerializerFactory _defaultSerializerFactory</text><polygon fill="none" points="505.5,131.5977,509.5,135.5977,505.5,139.5977,501.5,135.5977" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="298" x="515.5" y="147">SerializerFactory _serializerFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="495.5" x2="908.5" y1="154.7969" y2="154.7969"/><ellipse cx="505.5" cy="165.7969" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="388" x="515.5" y="176.1992">setSerializerFactory(SerializerFactory factory)</text><ellipse cx="505.5" cy="186.9961" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="330" x="515.5" y="197.3984">SerializerFactory getSerializerFactory()</text><polygon fill="#FFFF44" points="505.5,203.1953,509.5,207.1953,505.5,211.1953,501.5,207.1953" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="336" x="515.5" y="218.5977">SerializerFactory findSerializerFactory()</text></g><!--MD5=[38f80e5fbd3f81f352db392a0c46c8a8]
class Hessian2Output--><g id="elem_Hessian2Output"><rect codeLine="27" fill="#F1F1F1" height="50" id="Hessian2Output" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="173" x="475.5" y="339.3984"/><ellipse cx="491.5" cy="356.3984" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M494.001,362.5205 Q493.3857,362.8369 492.709,362.9951 Q492.0322,363.1533 491.2852,363.1533 Q488.6309,363.1533 487.2334,361.4043 Q485.8359,359.6553 485.8359,356.3506 Q485.8359,353.0371 487.2334,351.2881 Q488.6309,349.5391 491.2852,349.5391 Q492.0322,349.5391 492.7178,349.6973 Q493.4033,349.8555 494.001,350.1719 L494.001,353.0547 Q493.333,352.4395 492.7046,352.1538 Q492.0762,351.8682 491.4082,351.8682 Q489.9844,351.8682 489.2593,352.9976 Q488.5342,354.127 488.5342,356.3506 Q488.5342,358.5654 489.2593,359.6948 Q489.9844,360.8242 491.4082,360.8242 Q492.0762,360.8242 492.7046,360.5386 Q493.333,360.2529 494.001,359.6377 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="139" x="506.5" y="363.2012">Hessian2Output</text><line style="stroke:#181818;stroke-width:0.5;" x1="476.5" x2="647.5" y1="373.3984" y2="373.3984"/><line style="stroke:#181818;stroke-width:0.5;" x1="476.5" x2="647.5" y1="381.3984" y2="381.3984"/></g><!--MD5=[58e8cfe03e652d9b9e2d1201250d0be2]
class AbstractSerializerFactory--><g id="elem_AbstractSerializerFactory"><rect codeLine="29" fill="#F1F1F1" height="92.3984" id="AbstractSerializerFactory" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="340" x="755" y="318.3984"/><ellipse cx="813.5" cy="335.3984" fill="#A9DCDF" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M813.4141,330.6494 L812.1924,336.0195 L814.6445,336.0195 Z M811.832,328.2764 L815.0049,328.2764 L818.5469,341.3984 L815.9541,341.3984 L815.1455,338.1553 L811.6738,338.1553 L810.8828,341.3984 L808.29,341.3984 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" font-style="italic" lengthAdjust="spacing" textLength="214" x="835.5" y="342.2012">AbstractSerializerFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="756" x2="1094" y1="352.3984" y2="352.3984"/><line style="stroke:#181818;stroke-width:0.5;" x1="756" x2="1094" y1="360.3984" y2="360.3984"/><ellipse cx="766" cy="371.3984" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" font-style="italic" lengthAdjust="spacing" textLength="269" x="776" y="381.8008">Serializer getSerializer(Class cl)</text><ellipse cx="766" cy="392.5977" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" font-style="italic" lengthAdjust="spacing" textLength="313" x="776" y="403">Deserializer getDeserializer(Class cl)</text></g><!--MD5=[0e2e915064bf2e2ee735763ff21e6466]
class Serializer--><g id="elem_Serializer"><rect codeLine="50" fill="#F1F1F1" height="71.1992" id="Serializer" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="516" x="133" y="983.8984"/><ellipse cx="347" cy="1000.8984" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M343.0117,996.8115 L343.0117,994.5264 L350.8252,994.5264 L350.8252,996.8115 L348.2148,996.8115 L348.2148,1005.3633 L350.8252,1005.3633 L350.8252,1007.6484 L343.0117,1007.6484 L343.0117,1005.3633 L345.6221,1005.3633 L345.6221,996.8115 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" font-style="italic" lengthAdjust="spacing" textLength="79" x="369" y="1007.7012">Serializer</text><line style="stroke:#181818;stroke-width:0.5;" x1="134" x2="648" y1="1017.8984" y2="1017.8984"/><line style="stroke:#181818;stroke-width:0.5;" x1="134" x2="648" y1="1025.8984" y2="1025.8984"/><ellipse cx="144" cy="1036.8984" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="489" x="154" y="1047.3008">void writeObject(Object obj, AbstractHessianOutput out)</text></g><!--MD5=[404dae31c59c293c2ccca76809bb9a71]
class AbstractSerializer--><g id="elem_AbstractSerializer"><rect codeLine="53" fill="#F1F1F1" height="50" id="AbstractSerializer" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="185" x="80.5" y="1369.3984"/><ellipse cx="96.5" cy="1386.3984" fill="#A9DCDF" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M96.4141,1381.6494 L95.1924,1387.0195 L97.6445,1387.0195 Z M94.832,1379.2764 L98.0049,1379.2764 L101.5469,1392.3984 L98.9541,1392.3984 L98.1455,1389.1553 L94.6738,1389.1553 L93.8828,1392.3984 L91.29,1392.3984 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" font-style="italic" lengthAdjust="spacing" textLength="151" x="111.5" y="1393.2012">AbstractSerializer</text><line style="stroke:#181818;stroke-width:0.5;" x1="81.5" x2="264.5" y1="1403.3984" y2="1403.3984"/><line style="stroke:#181818;stroke-width:0.5;" x1="81.5" x2="264.5" y1="1411.3984" y2="1411.3984"/></g><!--MD5=[2e3e9d812ecad44a698ffbd8b3f5e9db]
class Deserializer--><g id="elem_Deserializer"><rect codeLine="55" fill="#F1F1F1" height="261.9922" id="Deserializer" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="579" x="755.5" y="888.3984"/><ellipse cx="990" cy="905.3984" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M986.0117,901.3115 L986.0117,899.0264 L993.8252,899.0264 L993.8252,901.3115 L991.2148,901.3115 L991.2148,909.8633 L993.8252,909.8633 L993.8252,912.1484 L986.0117,912.1484 L986.0117,909.8633 L988.6221,909.8633 L988.6221,901.3115 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" font-style="italic" lengthAdjust="spacing" textLength="101" x="1012" y="912.2012">Deserializer</text><line style="stroke:#181818;stroke-width:0.5;" x1="756.5" x2="1333.5" y1="922.3984" y2="922.3984"/><line style="stroke:#181818;stroke-width:0.5;" x1="756.5" x2="1333.5" y1="930.3984" y2="930.3984"/><ellipse cx="766.5" cy="941.3984" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="168" x="776.5" y="951.8008">Class&lt;?&gt; getType()</text><ellipse cx="766.5" cy="962.5977" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="208" x="776.5" y="973">boolean isReadResolve()</text><ellipse cx="766.5" cy="983.7969" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="374" x="776.5" y="994.1992">Object readObject(AbstractHessianInput in)</text><ellipse cx="766.5" cy="1004.9961" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="445" x="776.5" y="1015.3984">Object readList(AbstractHessianInput in, int length)</text><ellipse cx="766.5" cy="1026.1953" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="505" x="776.5" y="1036.5977">Object readLengthList(AbstractHessianInput in, int length)</text><ellipse cx="766.5" cy="1047.3945" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="355" x="776.5" y="1057.7969">Object readMap(AbstractHessianInput in)</text><ellipse cx="766.5" cy="1068.5938" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="244" x="776.5" y="1078.9961">Object[] createFields(int len)</text><ellipse cx="766.5" cy="1089.793" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="273" x="776.5" y="1100.1953">Object createField(String name)</text><ellipse cx="766.5" cy="1110.9922" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="507" x="776.5" y="1121.3945">Object readObject(AbstractHessianInput in, Object[] fields)</text><ellipse cx="766.5" cy="1132.1914" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="552" x="776.5" y="1142.5938">Object readObject(AbstractHessianInput in, String[] fieldNames)</text></g><!--MD5=[8dd192c69c3aebee6dcc238c8897e49f]
class AbstractDeserializer--><g id="elem_AbstractDeserializer"><rect codeLine="67" fill="#F1F1F1" height="50" id="AbstractDeserializer" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="207" x="1536.5" y="1369.3984"/><ellipse cx="1552.5" cy="1386.3984" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M1555.001,1392.5205 Q1554.3857,1392.8369 1553.709,1392.9951 Q1553.0322,1393.1533 1552.2852,1393.1533 Q1549.6309,1393.1533 1548.2334,1391.4043 Q1546.8359,1389.6553 1546.8359,1386.3506 Q1546.8359,1383.0371 1548.2334,1381.2881 Q1549.6309,1379.5391 1552.2852,1379.5391 Q1553.0322,1379.5391 1553.7178,1379.6973 Q1554.4033,1379.8555 1555.001,1380.1719 L1555.001,1383.0547 Q1554.333,1382.4395 1553.7046,1382.1538 Q1553.0762,1381.8682 1552.4082,1381.8682 Q1550.9844,1381.8682 1550.2593,1382.9976 Q1549.5342,1384.127 1549.5342,1386.3506 Q1549.5342,1388.5654 1550.2593,1389.6948 Q1550.9844,1390.8242 1552.4082,1390.8242 Q1553.0762,1390.8242 1553.7046,1390.5386 Q1554.333,1390.2529 1555.001,1389.6377 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="173" x="1567.5" y="1393.2012">AbstractDeserializer</text><line style="stroke:#181818;stroke-width:0.5;" x1="1537.5" x2="1742.5" y1="1403.3984" y2="1403.3984"/><line style="stroke:#181818;stroke-width:0.5;" x1="1537.5" x2="1742.5" y1="1411.3984" y2="1411.3984"/></g><!--MD5=[660438e3bfbdf387ea02a715c3723cd6]
class ContextSerializerFactory--><g id="elem_ContextSerializerFactory"><rect codeLine="80" fill="#F1F1F1" height="367.9883" id="ContextSerializerFactory" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="802" x="301" y="1210.3984"/><ellipse cx="592" cy="1227.3984" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M594.501,1233.5205 Q593.8857,1233.8369 593.209,1233.9951 Q592.5322,1234.1533 591.7852,1234.1533 Q589.1309,1234.1533 587.7334,1232.4043 Q586.3359,1230.6553 586.3359,1227.3506 Q586.3359,1224.0371 587.7334,1222.2881 Q589.1309,1220.5391 591.7852,1220.5391 Q592.5322,1220.5391 593.2178,1220.6973 Q593.9033,1220.8555 594.501,1221.1719 L594.501,1224.0547 Q593.833,1223.4395 593.2046,1223.1538 Q592.5762,1222.8682 591.9082,1222.8682 Q590.4844,1222.8682 589.7593,1223.9976 Q589.0342,1225.127 589.0342,1227.3506 Q589.0342,1229.5654 589.7593,1230.6948 Q590.4844,1231.8242 591.9082,1231.8242 Q592.5762,1231.8242 593.2046,1231.5386 Q593.833,1231.2529 594.501,1230.6377 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="211" x="614" y="1234.2012">ContextSerializerFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="302" x2="1102" y1="1244.3984" y2="1244.3984"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="309" y="1252.3984"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" text-decoration="underline" textLength="775" x="322" y="1265.8008">WeakHashMap&lt;ClassLoader, SoftReference&lt;ContextSerializerFactory&gt;&gt; _contextRefMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="309" y="1273.5977"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" text-decoration="underline" textLength="422" x="322" y="1287">HashMap&lt;String,Serializer&gt; _staticSerializerMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="309" y="1294.7969"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" text-decoration="underline" textLength="466" x="322" y="1308.1992">HashMap&lt;String,Deserializer&gt; _staticDeserializerMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="309" y="1315.9961"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="282" x="322" y="1329.3984">ContextSerializerFactory _parent</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="309" y="1337.1953"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="425" x="322" y="1350.5977">HashMap&lt;String, Serializer&gt; _serializerClassMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="309" y="1358.3945"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="541" x="322" y="1371.7969">ConcurrentHashMap&lt;String, Serializer&gt; _customSerializerMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="309" y="1379.5938"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="486" x="322" y="1392.9961">HashMap&lt;Class&lt;?&gt;, Serializer&gt; _serializerInterfaceMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="309" y="1400.793"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="468" x="322" y="1414.1953">HashMap&lt;String, Deserializer&gt; _deserializerClassMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="309" y="1421.9922"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="518" x="322" y="1435.3945">HashMap&lt;String, Deserializer&gt; _deserializerClassNameMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="309" y="1443.1914"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="585" x="322" y="1456.5938">ConcurrentHashMap&lt;String, Deserializer&gt; _customDeserializerMap</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="309" y="1464.3906"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="529" x="322" y="1477.793">HashMap&lt;Class&lt;?&gt;, Deserializer&gt; _deserializerInterfaceMap</text><line style="stroke:#181818;stroke-width:0.5;" x1="302" x2="1102" y1="1485.5898" y2="1485.5898"/><ellipse cx="312" cy="1496.5898" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="353" x="322" y="1506.9922">Serializer getSerializer(String className)</text><ellipse cx="312" cy="1517.7891" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="336" x="322" y="1528.1914">Serializer getCustomSerializer(Class cl)</text><ellipse cx="312" cy="1538.9883" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="397" x="322" y="1549.3906">Deserializer getDeserializer(String className)</text><ellipse cx="312" cy="1560.1875" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="380" x="322" y="1570.5898">Deserializer getCustomDeserializer(Class cl)</text></g><path d="M1156.5,1321.3984 L1156.5,1343.5977 L744,1280.1973 L1156.5,1351.5977 L1156.5,1373.7969 A0,0 0 0 0 1156.5,1373.7969 L1501.5,1373.7969 A0,0 0 0 0 1501.5,1373.7969 L1501.5,1331.3984 L1491.5,1321.3984 L1156.5,1321.3984 A0,0 0 0 0 1156.5,1321.3984 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1491.5,1321.3984 L1491.5,1331.3984 L1501.5,1331.3984 L1491.5,1321.3984 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="'Source" font-size="18" lengthAdjust="spacing" textLength="324" x="1162.5" y="1343.8008">启动时，会将基本类型、字符串和对象的</text><text fill="#000000" font-family="'Source" font-size="18" lengthAdjust="spacing" textLength="283" x="1162.5" y="1365">Serializer 实现类添加到该字段中。</text><path d="M1156.5,1383.7969 L1156.5,1416.5957 L747,1343.7949 L1156.5,1424.5957 L1156.5,1457.3945 A0,0 0 0 0 1156.5,1457.3945 L1483.5,1457.3945 A0,0 0 0 0 1483.5,1457.3945 L1483.5,1393.7969 L1473.5,1383.7969 L1156.5,1383.7969 A0,0 0 0 0 1156.5,1383.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1473.5,1383.7969 L1473.5,1393.7969 L1483.5,1393.7969 L1473.5,1383.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="'Source" font-size="18" lengthAdjust="spacing" textLength="304" x="1162.5" y="1406.1992">创建对象时，将 _staticSerializerMap</text><text fill="#000000" font-family="'Source" font-size="18" lengthAdjust="spacing" textLength="306" x="1162.5" y="1427.3984">的数据，完整添加到该字段，后续查找</text><text fill="#000000" font-family="'Source" font-size="18" lengthAdjust="spacing" textLength="277" x="1162.5" y="1448.5977">Serializer，也是从该字段中查找。</text><!--MD5=[694d2f8ea33a0523208455f880d0960c]
reverse link AbstractHessianInput to Hessian2Input--><g id="link_AbstractHessianInput_Hessian2Input"><path d="M138.97,191.4084 C153.7,218.3584 173.27,254.1584 190.75,286.1184 " fill="none" id="AbstractHessianInput-backto-Hessian2Input" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="132.65,194.4384,129.19,173.5284,144.93,187.7184,132.65,194.4384" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[d5f03ce4f73e745d716fb3b99ec73414]
reverse link Hessian2Constants to Hessian2Input--><g id="link_Hessian2Constants_Hessian2Input"><path d="M335.3,191.0184 C319.28,218.0084 297.92,253.9984 278.86,286.1184 " fill="none" id="Hessian2Constants-backto-Hessian2Input" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="329.45,187.1584,345.68,173.5284,341.49,194.2984,329.45,187.1584" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[7e2d63357847553087310b12648226d9]
reverse link Hessian2Input to SerializerFactory--><g id="link_Hessian2Input_SerializerFactory"><path codeLine="13" d="M365.11,449.6284 C391.16,466.2284 419.3,484.1684 447.83,502.3584 " fill="none" id="Hessian2Input-backto-SerializerFactory" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="354.08,442.5884,356.9889,449.1868,364.1985,449.0395,361.2896,442.4411,354.08,442.5884" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="11" x="353.3738" y="467.8988">1</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="11" x="424.2522" y="490.3697">1</text></g><!--MD5=[cafa6d060d71a221f6d5ff70431a58d2]
reverse link AbstractHessianOutput to SerializerFactory--><g id="link_AbstractHessianOutput_SerializerFactory"><path codeLine="25" d="M702,239.6484 C702,312.0584 702,415.5584 702,502.2684 " fill="none" id="AbstractHessianOutput-backto-SerializerFactory" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="702,226.4984,698,232.4984,702,238.4984,706,232.4984,702,226.4984" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="11" x="690.5102" y="251.8008">1</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="11" x="690.7508" y="490.817">1</text></g><!--MD5=[b60593531d8ba26640c5d20b59d4e447]
reverse link AbstractHessianOutput to Hessian2Output--><g id="link_AbstractHessianOutput_Hessian2Output"><path d="M640.3,243.7084 C617.28,278.8884 593.06,315.9284 577.75,339.3184 " fill="none" id="AbstractHessianOutput-backto-Hessian2Output" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="634.65,239.5584,651.46,226.6584,646.37,247.2284,634.65,239.5584" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[ac2e81f68f0e8090007493256e23bb7c]
reverse link Hessian2Constants to Hessian2Output--><g id="link_Hessian2Constants_Hessian2Output"><path d="M396.6,188.1684 C438.14,232.1884 504.63,302.6284 539.3,339.3584 " fill="none" id="Hessian2Constants-backto-Hessian2Output" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="391.42,192.8784,382.78,173.5284,401.6,183.2684,391.42,192.8784" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[8fc1c8d6cb1d9ae3ceebfedbbc619d8c]
reverse link AbstractSerializerFactory to SerializerFactory--><g id="link_AbstractSerializerFactory_SerializerFactory"><path d="M879.31,426.6584 C862.72,448.9084 843.09,475.2284 823.04,502.0984 " fill="none" id="AbstractSerializerFactory-backto-SerializerFactory" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="873.8,422.3284,891.37,410.4884,885.03,430.6984,873.8,422.3284" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[8d1cb1ce662ef78ffa2bc2ec39d2d9f8]
reverse link Serializer to AbstractSerializer--><g id="link_Serializer_AbstractSerializer"><path d="M360.48,1072.6184 C312.68,1154.4084 222.01,1309.5484 187.15,1369.1984 " fill="none" id="Serializer-backto-AbstractSerializer" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="354.55,1068.8884,370.69,1055.1584,366.64,1075.9584,354.55,1068.8884" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[fc5dcc99e2c1ad11d6db1f50cc8fe31b]
reverse link Deserializer to AbstractDeserializer--><g id="link_Deserializer_AbstractDeserializer"><path d="M1353.16,1112.2384 C1411.86,1138.2084 1470.14,1170.5684 1519,1210.3984 C1573.62,1254.9184 1612.48,1330.6584 1629.84,1369.2484 " fill="none" id="Deserializer-backto-AbstractDeserializer" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1350.11,1118.5484,1334.52,1104.2084,1355.65,1105.6984,1350.11,1118.5484" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[176a14353680acde457697ba65a5d480]
link Serializer to ContextSerializerFactory--><g id="link_Serializer_ContextSerializerFactory"><path codeLine="69" d="M419.98,1055.1584 C448.43,1089.2784 494.21,1144.1784 540.68,1199.9184 " fill="none" id="Serializer-to-ContextSerializerFactory" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="549.06,1209.9584,548.2898,1202.7886,541.3752,1200.7419,542.1454,1207.9118,549.06,1209.9584" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="13" x="410.8438" y="1080.5117">N</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="11" x="531.8709" y="1198.7501">1</text></g><!--MD5=[2dd962366980a83d75e985ed95b54777]
reverse link SerializerFactory to SerializerFactory--><g id="link_SerializerFactory_SerializerFactory"><path codeLine="71" d="M1109.4,633.4584 C1124.08,641.8984 1132.5,652.5484 1132.5,665.3984 C1132.5,681.3684 1119.49,693.9284 1097.63,703.0984 " fill="none" id="SerializerFactory-backto-SerializerFactory" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1097.63,627.6984,1101.2599,633.9293,1108.4076,632.9751,1104.7777,626.7442,1097.63,627.6984" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="11" x="1105.778" y="623.1279">1</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="13" x="1105.7983" y="700.0595">N</text></g><!--MD5=[66aa397faf94e9d41bf66269678e7127]
reverse link SerializerFactory to ContextSerializerFactory--><g id="link_SerializerFactory_ContextSerializerFactory"><path codeLine="72" d="M702,841.7284 C702,953.1984 702,1097.2584 702,1210.2184 " fill="none" id="SerializerFactory-backto-ContextSerializerFactory" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="702,828.6484,698,834.6484,702,840.6484,706,834.6484,702,828.6484" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="11" x="690.768" y="853.3937">1</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="11" x="690.768" y="1198.4122">1</text></g><!--MD5=[e34355a110e4663a5b910682c3429a6a]
reverse link SerializerFactory to Serializer--><g id="link_SerializerFactory_Serializer"><path codeLine="75" d="M550.03,838.4084 C501.33,893.5284 452.16,949.1684 421.66,983.6984 " fill="none" id="SerializerFactory-backto-Serializer" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="558.79,828.4884,551.819,830.3339,550.8414,837.4784,557.8124,835.633,558.79,828.4884" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="11" x="541.5163" y="853.227">1</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="13" x="412.8125" y="972.1602">N</text></g><!--MD5=[be20fd233fdca0abcd219123393b8bec]
reverse link SerializerFactory to Deserializer--><g id="link_SerializerFactory_Deserializer"><path codeLine="76" d="M869.11,837.8884 C885.62,854.8284 902.18,871.8284 918.18,888.2584 " fill="none" id="SerializerFactory-backto-Deserializer" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="859.95,828.4884,861.2707,835.5776,868.3225,837.0851,867.0018,829.9959,859.95,828.4884" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="11" x="855.3815" y="853.227">1</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="13" x="897.4724" y="876.4782">N</text></g><!--MD5=[665e947610ef1c6326f69964e29660e4]
link Deserializer to ContextSerializerFactory--><g id="link_Deserializer_ContextSerializerFactory"><path codeLine="78" d="M925.28,1150.5984 C910.41,1166.7584 894.98,1183.5384 879.48,1200.3984 " fill="none" id="Deserializer-to-ContextSerializerFactory" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="870.35,1210.3284,877.3568,1208.624,878.4784,1201.5007,871.4716,1203.2051,870.35,1210.3284" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="13" x="905.3773" y="1175.7557">N</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="11" x="866.2202" y="1198.5268">1</text></g><!--MD5=[6069e47152dd842c8cf4b662ccbdd7d7]
reverse link ContextSerializerFactory to ContextSerializerFactory--><g id="link_ContextSerializerFactory_ContextSerializerFactory"><path codeLine="107" d="M1114.58,1354.5684 C1129.46,1365.0984 1138,1378.3784 1138,1394.3984 C1138,1414.1184 1125.07,1429.6884 1103.29,1441.0884 " fill="none" id="ContextSerializerFactory-backto-ContextSerializerFactory" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1103.29,1347.7084,1106.3389,1354.2433,1113.5437,1353.9424,1110.4948,1347.4075,1103.29,1347.7084" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="11" x="1111.5529" y="1342.9513">1</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="13" x="1111.5732" y="1438.228">N</text></g><rect height="23.5547" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="381" x="677.75" y="1584.3867"/><text fill="#888888" font-family="'Source" font-size="20" lengthAdjust="spacing" textLength="381" x="677.75" y="1603.7227">D瓜哥 · https://www.diguage.com · 出品</text><!--MD5=[4c4e98c3d051120592b91421a9cd7e25]
@startuml
skinparamlocked defaultFontSize 18
skinparamlocked titleFontSize 36
skinparamlocked footerFontSize 20
skinparamlocked titleFontName 'Source
skinparamlocked noteFontName 'Source
skinparamlocked footerFontName 'Source
title **Hessian 架构**

abstract class AbstractHessianInput

class Hessian2Input extends AbstractHessianInput implements Hessian2Constants {
  #SerializerFactory _defaultSerializerFactory
  #SerializerFactory _serializerFactory;
  +setSerializerFactory(SerializerFactory factory)
  +SerializerFactory getSerializerFactory()
  #SerializerFactory findSerializerFactory()
}

Hessian2Input "1" o- - "1" SerializerFactory



abstract class AbstractHessianOutput {
  -SerializerFactory _defaultSerializerFactory
  #SerializerFactory _serializerFactory
  +setSerializerFactory(SerializerFactory factory)
  +SerializerFactory getSerializerFactory()
  #SerializerFactory findSerializerFactory()
}

AbstractHessianOutput "1" o- - "1" SerializerFactory

class Hessian2Output extends AbstractHessianOutput implements Hessian2Constants

abstract class AbstractSerializerFactory {
  +{abstract} Serializer getSerializer(Class cl)
  +{abstract} Deserializer getDeserializer(Class cl)
}

class SerializerFactory extends AbstractSerializerFactory {
  -{static} WeakHashMap<ClassLoader, SoftReference<SerializerFactory>> _defaultFactoryRefMap
  -ContextSerializerFactory _contextFactory
  #Serializer _defaultSerializer
  #ArrayList<SerializerFactory> _factories
  #CollectionSerializer _collectionSerializer
  #MapSerializer _mapSerializer
  -Deserializer _hashMapDeserializer
  -Deserializer _arrayListDeserializer
  -ConcurrentHashMap<Class, Serializer> _cachedSerializerMap
  -ConcurrentHashMap<Class, Deserializer> _cachedDeserializerMap
  -HashMap<String, Deserializer> _cachedTypeDeserializerMap
  +void addFactory(AbstractSerializerFactory factory)
  +{static}SerializerFactory createDefault()
}

interface Serializer {
  +void writeObject(Object obj, AbstractHessianOutput out)
}
abstract class AbstractSerializer implements Serializer

interface Deserializer {
  + Class<?> getType()
  + boolean isReadResolve()
  + Object readObject(AbstractHessianInput in)
  + Object readList(AbstractHessianInput in, int length)
  + Object readLengthList(AbstractHessianInput in, int length)
  + Object readMap(AbstractHessianInput in)
  + Object[] createFields(int len)
  + Object createField(String name)
  + Object readObject(AbstractHessianInput in, Object[] fields)
  + Object readObject(AbstractHessianInput in, String[] fieldNames)
}
class AbstractDeserializer implements Deserializer

Serializer "N" - -o "1" ContextSerializerFactory

SerializerFactory "1" o- - "N" SerializerFactory
SerializerFactory "1" o- - "1" ContextSerializerFactory


SerializerFactory "1" o- - "N" Serializer
SerializerFactory "1" o- - "N" Deserializer

Deserializer "N" - -o "1" ContextSerializerFactory

class ContextSerializerFactory {
  -{static} WeakHashMap<ClassLoader, SoftReference<ContextSerializerFactory>> _contextRefMap
  -{static} HashMap<String,Serializer> _staticSerializerMap
  -{static} HashMap<String,Deserializer> _staticDeserializerMap
  -ContextSerializerFactory _parent
  -HashMap<String, Serializer> _serializerClassMap
  -ConcurrentHashMap<String, Serializer> _customSerializerMap
  -HashMap<Class<?>, Serializer> _serializerInterfaceMap
  -HashMap<String, Deserializer> _deserializerClassMap
  -HashMap<String, Deserializer> _deserializerClassNameMap
  -ConcurrentHashMap<String, Deserializer> _customDeserializerMap
  -HashMap<Class<?>, Deserializer> _deserializerInterfaceMap
  +Serializer getSerializer(String className)
  +Serializer getCustomSerializer(Class cl)
  +Deserializer getDeserializer(String className)
  +Deserializer getCustomDeserializer(Class cl)
}
note right of ContextSerializerFactory::_staticSerializerMap
  启动时，会将基本类型、字符串和对象的
  Serializer 实现类添加到该字段中。
end note
note right of ContextSerializerFactory::_serializerClassMap
  创建对象时，将 _staticSerializerMap
  的数据，完整添加到该字段，后续查找
  Serializer，也是从该字段中查找。
end note

ContextSerializerFactory "1" o- - "N" ContextSerializerFactory


footer D瓜哥 · https://www.diguage.com · 出品
@enduml

PlantUML version 1.2022.6(Wed Jun 22 01:34:49 CST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: CN
--></g></svg>