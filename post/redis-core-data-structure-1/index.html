<!doctype html><html class=no-js lang=zh-cn><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Redis æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆä¸€ï¼‰ - "åœ°ç“œå“¥"åšå®¢ç½‘</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=keywords content="Redis,Spring,å­˜å‚¨,è®¾è®¡,æ¶æ„,ç¨‹åºè®¾è®¡,ç®—æ³•,åˆ†å¸ƒå¼"><meta name=description content><meta property="og:url" content="https://www.diguage.com/post/redis-core-data-structure-1/"><meta property="og:site_name" content='"åœ°ç“œå“¥"åšå®¢ç½‘'><meta property="og:title" content="Redis æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆä¸€ï¼‰"><meta property="og:description" content=" æœ¬æ–‡å†…å®¹å¯¹äº Redis 7+ æ¥è¯´å·²ç»è¿‡æ—¶ï¼Œæœ€æ–°å®ç°è¯·çœ‹ä¸‹é¢ä¸¤ç¯‡æ–‡ç« ï¼š
Redis æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ3ï¼‰
Redis æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ4ï¼‰
Redis ç›®å‰æ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„ç¼“å­˜ä¸­é—´ä»¶ã€‚å…¶çªå‡ºç‰¹ç‚¹å°±æ˜¯æ”¯æŒå¤šç§å¸¸è§çš„æ•°æ®ç»“æ„ã€‚å¯¹æ¯” JDK é›†åˆç±»çš„å®ç°ï¼ŒRedis çš„å®ç°è¡¨ç°å‡ºå¾ˆå¤šç‹¬åˆ°ä¹‹å¤„ï¼Œå¾ˆå¤šåœ°æ–¹è®¾è®¡å¾—åˆ«å…·åŒ å¿ƒã€‚ä¸‹é¢å°±æ¥ç®€è¦ä»‹ç»ä¸€ä¸‹ã€‚
linkedlist Redis åº•å±‚ä¹Ÿæœ‰å¾ˆå¤šåœ°æ–¹ä½¿ç”¨åˆ° linkedlistï¼Œå¹¶ä¸”ä¹Ÿæ˜¯åŒå‘é“¾è¡¨ã€‚
adlist.h typedef struct listNode { struct listNode *prev; struct listNode *next; void *value; } listNode; typedef struct listIter { listNode *next; int direction; } listIter; typedef struct list { listNode *head; listNode *tail; void *(*dup)(void *ptr); void (*free)(void *ptr); int (*match)(void *ptr, void *key); unsigned long len; } list; Redis çš„ linkedlist å®ç°ç‰¹ç‚¹æ˜¯ï¼š
åŒå‘ï¼šèŠ‚ç‚¹å¸¦æœ‰å‰åæŒ‡é’ˆï¼›
æ— ç¯ï¼šé¦–å°¾æ²¡æœ‰ç›¸è¿ï¼Œæ‰€ä»¥æ²¡æœ‰æ„æˆç¯çŠ¶ï¼›
é“¾è¡¨ä¿å­˜äº†é¦–å°¾æŒ‡é’ˆï¼›
å¤šæ€ï¼šå¯ä»¥ä¿å­˜ä¸åŒç±»å‹çš„å€¼ï¼Œè¿™é‡Œæˆä¸ºæ³›å‹ä¹Ÿè®¸æ›´ç¬¦åˆ Java ä¸­çš„è¯­ä¹‰ã€‚
Redis åœ¨ 2014 å¹´å®ç°äº† quicklistï¼Œå¹¶ä½¿ç”¨ quicklist ä»£æ›¿äº† linkedlistã€‚æ‰€ä»¥ï¼Œç°åœ¨ linkedlist å‡ ä¹å·²ç»æ˜¯åºŸå¼ƒçŠ¶æ€ã€‚
ziplist Redis å®˜æ–¹åœ¨ ziplist.c æ–‡ä»¶çš„æ³¨é‡Šä¸­å¯¹ ziplist è¿›è¡Œäº†å®šä¹‰ï¼š
The ziplist is a specially encoded dually linked list that is designed to be very memory efficient. It stores both strings and integer values, where integers are encoded as actual integers instead of a series of characters. It allows push and pop operations on either side of the list in O(1) time. However, because every operation requires a reallocation of the memory used by the ziplist, the actual complexity is related to the amount of memory used by the ziplist."><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2020-07-02T10:13:16+08:00"><meta property="article:modified_time" content="2025-06-17T11:39:58+08:00"><meta property="article:tag" content="å­˜å‚¨"><meta property="article:tag" content="è®¾è®¡"><meta property="article:tag" content="æ¶æ„"><meta name=twitter:card content="summary"><meta name=twitter:title content="Redis æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆä¸€ï¼‰"><meta name=twitter:description content=" æœ¬æ–‡å†…å®¹å¯¹äº Redis 7+ æ¥è¯´å·²ç»è¿‡æ—¶ï¼Œæœ€æ–°å®ç°è¯·çœ‹ä¸‹é¢ä¸¤ç¯‡æ–‡ç« ï¼š
Redis æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ3ï¼‰
Redis æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ4ï¼‰
Redis ç›®å‰æ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„ç¼“å­˜ä¸­é—´ä»¶ã€‚å…¶çªå‡ºç‰¹ç‚¹å°±æ˜¯æ”¯æŒå¤šç§å¸¸è§çš„æ•°æ®ç»“æ„ã€‚å¯¹æ¯” JDK é›†åˆç±»çš„å®ç°ï¼ŒRedis çš„å®ç°è¡¨ç°å‡ºå¾ˆå¤šç‹¬åˆ°ä¹‹å¤„ï¼Œå¾ˆå¤šåœ°æ–¹è®¾è®¡å¾—åˆ«å…·åŒ å¿ƒã€‚ä¸‹é¢å°±æ¥ç®€è¦ä»‹ç»ä¸€ä¸‹ã€‚
linkedlist Redis åº•å±‚ä¹Ÿæœ‰å¾ˆå¤šåœ°æ–¹ä½¿ç”¨åˆ° linkedlistï¼Œå¹¶ä¸”ä¹Ÿæ˜¯åŒå‘é“¾è¡¨ã€‚
adlist.h typedef struct listNode { struct listNode *prev; struct listNode *next; void *value; } listNode; typedef struct listIter { listNode *next; int direction; } listIter; typedef struct list { listNode *head; listNode *tail; void *(*dup)(void *ptr); void (*free)(void *ptr); int (*match)(void *ptr, void *key); unsigned long len; } list; Redis çš„ linkedlist å®ç°ç‰¹ç‚¹æ˜¯ï¼š
åŒå‘ï¼šèŠ‚ç‚¹å¸¦æœ‰å‰åæŒ‡é’ˆï¼›
æ— ç¯ï¼šé¦–å°¾æ²¡æœ‰ç›¸è¿ï¼Œæ‰€ä»¥æ²¡æœ‰æ„æˆç¯çŠ¶ï¼›
é“¾è¡¨ä¿å­˜äº†é¦–å°¾æŒ‡é’ˆï¼›
å¤šæ€ï¼šå¯ä»¥ä¿å­˜ä¸åŒç±»å‹çš„å€¼ï¼Œè¿™é‡Œæˆä¸ºæ³›å‹ä¹Ÿè®¸æ›´ç¬¦åˆ Java ä¸­çš„è¯­ä¹‰ã€‚
Redis åœ¨ 2014 å¹´å®ç°äº† quicklistï¼Œå¹¶ä½¿ç”¨ quicklist ä»£æ›¿äº† linkedlistã€‚æ‰€ä»¥ï¼Œç°åœ¨ linkedlist å‡ ä¹å·²ç»æ˜¯åºŸå¼ƒçŠ¶æ€ã€‚
ziplist Redis å®˜æ–¹åœ¨ ziplist.c æ–‡ä»¶çš„æ³¨é‡Šä¸­å¯¹ ziplist è¿›è¡Œäº†å®šä¹‰ï¼š
The ziplist is a specially encoded dually linked list that is designed to be very memory efficient. It stores both strings and integer values, where integers are encoded as actual integers instead of a series of characters. It allows push and pop operations on either side of the list in O(1) time. However, because every operation requires a reallocation of the memory used by the ziplist, the actual complexity is related to the amount of memory used by the ziplist."><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/css/asciidoctor.css><link rel=stylesheet href=/css/rouge-monokai.css><link rel="shortcut icon" href=/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-1MMT2NLEL4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1MMT2NLEL4")}</script><script id=baidu_analytics>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?e56e7dd0a120b414f5741f4c5e5218ea",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title='"åœ°ç“œå“¥"åšå®¢ç½‘' rel=home><div class="logo__item logo__text"><div class=logo__title>"åœ°ç“œå“¥"åšå®¢ç½‘</div><div class=logo__tagline>åˆ†äº«æŠ€æœ¯å¸¦æ¥çš„å–œæ‚¦ â€” https://www.diguage.com/</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>èœå•</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>é¦–é¡µ</span></a></li><li class=menu__item><a class=menu__link href=/categories/><span class=menu__text>åˆ†ç±»</span></a></li><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>å…³äº</span></a></li><li class=menu__item><a class=menu__link href=/archives/><span class=menu__text>å½’æ¡£</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Redis æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆä¸€ï¼‰</h1><div class="post__meta meta"><div class="meta__item-author meta__item"><svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2.0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class=meta__text>Dç“œå“¥</span></div><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2020-07-02T10:13:16+08:00>2020-07-02</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/ rel=category>ç¨‹åºè®¾è®¡</a>, <a class=meta__link href=/categories/%E7%AE%97%E6%B3%95/ rel=category>ç®—æ³•</a>, <a class=meta__link href=/categories/%E5%88%86%E5%B8%83%E5%BC%8F/ rel=category>åˆ†å¸ƒå¼</a></span></div></div></header><figure class="post__thumbnail thumbnail"><img class=thumbnail__image src=/images/redis/redis-logo.png alt="Redis æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆä¸€ï¼‰"></figure><div class="content post__content clearfix"><div class=sidebarblock><div class=content><div class=paragraph><p>æœ¬æ–‡å†…å®¹å¯¹äº Redis 7+ æ¥è¯´å·²ç»è¿‡æ—¶ï¼Œæœ€æ–°å®ç°è¯·çœ‹ä¸‹é¢ä¸¤ç¯‡æ–‡ç« ï¼š</p></div><div class=ulist><ul><li><p><a href=https://www.diguage.com/post/redis-core-data-structure-3/>Redis æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ3ï¼‰</a></p></li><li><p><a href=https://www.diguage.com/post/redis-core-data-structure-4/>Redis æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ4ï¼‰</a></p></li></ul></div></div></div><div class=paragraph><p>Redis ç›®å‰æ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„ç¼“å­˜ä¸­é—´ä»¶ã€‚å…¶çªå‡ºç‰¹ç‚¹å°±æ˜¯æ”¯æŒå¤šç§å¸¸è§çš„æ•°æ®ç»“æ„ã€‚å¯¹æ¯” JDK é›†åˆç±»çš„å®ç°ï¼ŒRedis çš„å®ç°è¡¨ç°å‡ºå¾ˆå¤šç‹¬åˆ°ä¹‹å¤„ï¼Œå¾ˆå¤šåœ°æ–¹è®¾è®¡å¾—åˆ«å…·åŒ å¿ƒã€‚ä¸‹é¢å°±æ¥ç®€è¦ä»‹ç»ä¸€ä¸‹ã€‚</p></div><div class=sect1><h2 id=_linkedlist>linkedlist</h2><div class=sectionbody><div class=paragraph><p>Redis åº•å±‚ä¹Ÿæœ‰å¾ˆå¤šåœ°æ–¹ä½¿ç”¨åˆ° linkedlistï¼Œå¹¶ä¸”ä¹Ÿæ˜¯åŒå‘é“¾è¡¨ã€‚</p></div><div class=listingblock><div class=title>adlist.h</div><div class=content><pre class="rouge highlight"><code data-lang=c><span class=k>typedef</span> <span class=k>struct</span> <span class=n>listNode</span> <span class=p>{</span>
    <span class=k>struct</span> <span class=n>listNode</span> <span class=o>*</span><span class=n>prev</span><span class=p>;</span>
    <span class=k>struct</span> <span class=n>listNode</span> <span class=o>*</span><span class=n>next</span><span class=p>;</span>
    <span class=kt>void</span> <span class=o>*</span><span class=n>value</span><span class=p>;</span>
<span class=p>}</span> <span class=n>listNode</span><span class=p>;</span>

<span class=k>typedef</span> <span class=k>struct</span> <span class=n>listIter</span> <span class=p>{</span>
    <span class=n>listNode</span> <span class=o>*</span><span class=n>next</span><span class=p>;</span>
    <span class=kt>int</span> <span class=n>direction</span><span class=p>;</span>
<span class=p>}</span> <span class=n>listIter</span><span class=p>;</span>

<span class=k>typedef</span> <span class=k>struct</span> <span class=n>list</span> <span class=p>{</span>
    <span class=n>listNode</span> <span class=o>*</span><span class=n>head</span><span class=p>;</span>
    <span class=n>listNode</span> <span class=o>*</span><span class=n>tail</span><span class=p>;</span>
    <span class=kt>void</span> <span class=o>*</span><span class=p>(</span><span class=o>*</span><span class=n>dup</span><span class=p>)(</span><span class=kt>void</span> <span class=o>*</span><span class=n>ptr</span><span class=p>);</span>
    <span class=kt>void</span> <span class=p>(</span><span class=o>*</span><span class=n>free</span><span class=p>)(</span><span class=kt>void</span> <span class=o>*</span><span class=n>ptr</span><span class=p>);</span>
    <span class=kt>int</span> <span class=p>(</span><span class=o>*</span><span class=n>match</span><span class=p>)(</span><span class=kt>void</span> <span class=o>*</span><span class=n>ptr</span><span class=p>,</span> <span class=kt>void</span> <span class=o>*</span><span class=n>key</span><span class=p>);</span>
    <span class=kt>unsigned</span> <span class=kt>long</span> <span class=n>len</span><span class=p>;</span>
<span class=p>}</span> <span class=n>list</span><span class=p>;</span></code></pre></div></div><div class=paragraph><p>Redis çš„ linkedlist å®ç°ç‰¹ç‚¹æ˜¯ï¼š</p></div><div class="olist arabic"><ol class=arabic><li><p>åŒå‘ï¼šèŠ‚ç‚¹å¸¦æœ‰å‰åæŒ‡é’ˆï¼›</p></li><li><p>æ— ç¯ï¼šé¦–å°¾æ²¡æœ‰ç›¸è¿ï¼Œæ‰€ä»¥æ²¡æœ‰æ„æˆç¯çŠ¶ï¼›</p></li><li><p>é“¾è¡¨ä¿å­˜äº†é¦–å°¾æŒ‡é’ˆï¼›</p></li><li><p>å¤šæ€ï¼šå¯ä»¥ä¿å­˜ä¸åŒç±»å‹çš„å€¼ï¼Œè¿™é‡Œæˆä¸ºæ³›å‹ä¹Ÿè®¸æ›´ç¬¦åˆ Java ä¸­çš„è¯­ä¹‰ã€‚</p></li></ol></div><div class=paragraph><p>Redis åœ¨ 2014 å¹´å®ç°äº† <a href=#quicklist>quicklist</a>ï¼Œå¹¶ä½¿ç”¨ quicklist ä»£æ›¿äº† linkedlistã€‚æ‰€ä»¥ï¼Œç°åœ¨ linkedlist å‡ ä¹å·²ç»æ˜¯åºŸå¼ƒçŠ¶æ€ã€‚</p></div></div></div><div class=sect1><h2 id=_ziplist>ziplist</h2><div class=sectionbody><div class=paragraph><p>Redis å®˜æ–¹åœ¨ ziplist.c æ–‡ä»¶çš„æ³¨é‡Šä¸­å¯¹ ziplist è¿›è¡Œäº†å®šä¹‰ï¼š</p></div><div class=quoteblock><blockquote><div class=paragraph><p>The ziplist is a specially encoded dually linked list that is designed
to be very memory efficient. It stores both strings and integer values,
where integers are encoded as actual integers instead of a series of
characters. It allows push and pop operations on either side of the list
in O(1) time. However, because every operation requires a reallocation of
the memory used by the ziplist, the actual complexity is related to the
amount of memory used by the ziplist.</p></div></blockquote><div class=attribution>â€” ziplist.c</div></div><div class=paragraph><p>å°±æ˜¯è¯´ï¼Œziplist æ˜¯ä¸€ä¸ªç»è¿‡ç‰¹æ®Šç¼–ç çš„åŒå‘é“¾è¡¨ï¼Œå®ƒçš„è®¾è®¡ç›®æ ‡å°±æ˜¯ä¸ºäº†æé«˜å­˜å‚¨æ•ˆç‡ã€‚ziplist å¯ä»¥ç”¨äºå­˜å‚¨å­—ç¬¦ä¸²æˆ–æ•´æ•°ï¼Œå…¶ä¸­æ•´æ•°æ˜¯æŒ‰çœŸæ­£çš„äºŒè¿›åˆ¶è¡¨ç¤ºè¿›è¡Œç¼–ç çš„ï¼Œè€Œä¸æ˜¯ç¼–ç æˆå­—ç¬¦ä¸²åºåˆ—ã€‚å®ƒèƒ½ä»¥ O(1) çš„æ—¶é—´å¤æ‚åº¦åœ¨è¡¨çš„ä¸¤ç«¯æä¾› <code>push</code> å’Œ <code>pop</code> æ“ä½œã€‚</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code>The general layout of the ziplist is as follows:

&lt;zlbytes&gt; &lt;zltail&gt; &lt;zllen&gt; &lt;entry&gt; &lt;entry&gt; ... &lt;entry&gt; &lt;zlend&gt;

NOTE: all fields are stored in little endian, if not specified otherwise.</code></pre></div></div><div class=imageblock><div class=content><img src=/images/redis/redis-ziplist-structure.jpg alt="redis ziplist structure"></div></div><div class="olist arabic"><ol class=arabic><li><p><code>&lt;zlbytes></code>: 32bitï¼Œè¡¨ç¤ºziplistå ç”¨çš„å­—èŠ‚æ€»æ•°ï¼ˆä¹ŸåŒ…æ‹¬&lt;zlbytes>æœ¬èº«å ç”¨çš„4ä¸ªå­—èŠ‚ï¼‰ã€‚</p></li><li><p><code>&lt;zltail></code>: 32bitï¼Œè¡¨ç¤ºziplistè¡¨ä¸­æœ€åä¸€é¡¹ï¼ˆentryï¼‰åœ¨ziplistä¸­çš„åç§»å­—èŠ‚æ•°ã€‚</p><div class=paragraph><p><code>&lt;zltail></code> çš„å­˜åœ¨ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ‰¾åˆ°æœ€åä¸€é¡¹ï¼ˆä¸ç”¨éå†æ•´ä¸ªziplistï¼‰ï¼Œä»è€Œå¯ä»¥åœ¨ziplistå°¾ç«¯å¿«é€Ÿåœ°æ‰§è¡Œpushæˆ–popæ“ä½œã€‚</p></div></li><li><p><code>&lt;zllen></code>: 16bitï¼Œ è¡¨ç¤ºziplistä¸­æ•°æ®é¡¹ï¼ˆentryï¼‰çš„ä¸ªæ•°ã€‚zllenå­—æ®µå› ä¸ºåªæœ‰16bitï¼Œæ‰€ä»¥å¯ä»¥è¡¨è¾¾çš„æœ€å¤§å€¼ä¸º2<sup>16</sup>-1ã€‚<code>&lt;zllen></code> ç­‰äº16bitå…¨ä¸º1çš„æƒ…å†µï¼Œé‚£ä¹ˆ <code>&lt;zllen></code> å°±ä¸è¡¨ç¤ºæ•°æ®é¡¹ä¸ªæ•°äº†ï¼Œè¿™æ—¶è¦æƒ³çŸ¥é“ ziplist ä¸­æ•°æ®é¡¹æ€»æ•°ï¼Œé‚£ä¹ˆå¿…é¡»å¯¹ziplistä»å¤´åˆ°å°¾éå†å„ä¸ªæ•°æ®é¡¹ï¼Œæ‰èƒ½è®¡æ•°å‡ºæ¥ã€‚</p></li><li><p><code>&lt;entry></code>: è¡¨ç¤ºçœŸæ­£å­˜æ”¾æ•°æ®çš„æ•°æ®é¡¹ï¼Œé•¿åº¦ä¸å®šã€‚ä¸€ä¸ªæ•°æ®é¡¹ï¼ˆentryï¼‰ä¹Ÿæœ‰å®ƒè‡ªå·±çš„å†…éƒ¨ç»“æ„ï¼Œè¿™ä¸ªç¨åå†è§£é‡Šã€‚</p></li><li><p><code>&lt;zlend></code>: ziplist æœ€å 1 ä¸ªå­—èŠ‚ï¼Œæ˜¯ä¸€ä¸ªç»“æŸæ ‡è®°ï¼Œå€¼å›ºå®šç­‰äº 255ã€‚</p></li></ol></div><div class=paragraph><p>ziplist å°†è¡¨ä¸­æ¯ä¸€é¡¹å­˜æ”¾åœ¨å‰åè¿ç»­çš„åœ°å€ç©ºé—´å†…ï¼Œä¸€ä¸ªziplistæ•´ä½“å ç”¨ä¸€å¤§å—å†…å­˜ã€‚å®ƒæ˜¯ä¸€ä¸ªè¡¨ï¼ˆlistï¼‰ï¼Œä½†å…¶å®ä¸æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼ˆlinked listï¼‰ã€‚</p></div><div class=paragraph><p>ziplist ä¸ºäº†åœ¨ç»†èŠ‚ä¸ŠèŠ‚çœå†…å­˜ï¼Œå¯¹äºå€¼çš„å­˜å‚¨é‡‡ç”¨äº†å˜é•¿çš„ç¼–ç æ–¹å¼ã€‚</p></div><div class=paragraph><p>æ¯ä¸€ä¸ªæ•°æ®é¡¹&lt;entry>çš„æ„æˆï¼š</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code>&lt;prevlen&gt; &lt;encoding&gt; &lt;entry-data&gt; <i class=conum data-value=1></i><b>(1)</b></code></pre></div></div><div class="colist arabic"><table><tbody><tr><td><i class=conum data-value=1></i><b>1</b></td><td><code>&lt;prevlen></code>: è¡¨ç¤ºå‰ä¸€ä¸ªæ•°æ®é¡¹å ç”¨çš„æ€»å­—èŠ‚æ•°ã€‚<div class="olist arabic"><ol class=arabic><li><p>å¦‚æœå‰ä¸€ä¸ªæ•°æ®é¡¹å ç”¨å­—èŠ‚æ•°å°äº254ï¼Œé‚£ä¹ˆ <code>&lt;prevlen></code> å°±åªç”¨ä¸€ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºï¼Œè¿™ä¸ªå­—èŠ‚çš„å€¼å°±æ˜¯å‰ä¸€ä¸ªæ•°æ®é¡¹çš„å ç”¨å­—èŠ‚æ•°ï¼š <code>&lt;prevlen from 0 to 253> &lt;encoding> &lt;entry></code></p></li><li><p>å¦‚æœå‰ä¸€ä¸ªæ•°æ®é¡¹å ç”¨å­—èŠ‚æ•°å¤§äºç­‰äº254ï¼Œé‚£ä¹ˆ <code>&lt;prevlen></code> å°±ç”¨5ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºï¼Œå…¶ä¸­ç¬¬1ä¸ªå­—èŠ‚çš„å€¼æ˜¯254ï¼ˆä½œä¸ºè¿™ç§æƒ…å†µçš„ä¸€ä¸ªæ ‡è®°ï¼‰ï¼Œè€Œåé¢4ä¸ªå­—èŠ‚ç»„æˆä¸€ä¸ªæ•´å‹å€¼ï¼Œæ¥çœŸæ­£å­˜å‚¨å‰ä¸€ä¸ªæ•°æ®é¡¹çš„å ç”¨å­—èŠ‚æ•°</p><div class=listingblock><div class=content><pre class="rouge highlight"><code>0xFE &lt;4 bytes unsigned little endian prevlen&gt; &lt;encoding&gt; &lt;entry&gt;  <i class=conum data-value=2></i><b>(2)</b> <i class=conum data-value=3></i><b>(3)</b></code></pre></div></div></li></ol></div></td></tr><tr><td><i class=conum data-value=2></i><b>2</b></td><td><code>&lt;encoding></code>: è¡¨ç¤ºå½“å‰æ•°æ®é¡¹çš„ç±»å‹ï¼Œæ•´å‹æˆ–è€…å­—ç¬¦ä¸²ã€‚</td></tr><tr><td><i class=conum data-value=3></i><b>3</b></td><td><code>&lt;entry-data></code>: æ•°æ®</td></tr></tbody></table></div><div class=paragraph><p>å…³äº <code>&lt;encoding> &lt;entry-data></code> çš„ç¼–ç ï¼Œç›´æ¥å¼•ç”¨å®˜æ–¹æ–‡æ¡£ï¼š</p></div><div class=listingblock><div class=title>ziplist.c</div><div class=content><pre class="rouge highlight"><code>The encoding field of the entry depends on the content of the
entry. When the entry is a string, the first 2 bits of the encoding first
byte will hold the type of encoding used to store the length of the string,
followed by the actual length of the string. When the entry is an integer
the first 2 bits are both set to 1. The following 2 bits are used to specify
what kind of integer will be stored after this header. An overview of the
different types and encodings is as follows. The first byte is always enough
to determine the kind of entry.

 |00pppppp| - 1 byte
      String value with length less than or equal to 63 bytes (6 bits).
      &#34;pppppp&#34; represents the unsigned 6 bit length.
 |01pppppp|qqqqqqqq| - 2 bytes
      String value with length less than or equal to 16383 bytes (14 bits).
      IMPORTANT: The 14 bit number is stored in big endian.
 |10000000|qqqqqqqq|rrrrrrrr|ssssssss|tttttttt| - 5 bytes
      String value with length greater than or equal to 16384 bytes.
      Only the 4 bytes following the first byte represents the length
      up to 2^32-1. The 6 lower bits of the first byte are not used and
      are set to zero.
      IMPORTANT: The 32 bit number is stored in big endian.
 |11000000| - 3 bytes
      Integer encoded as int16_t (2 bytes).
 |11010000| - 5 bytes
      Integer encoded as int32_t (4 bytes).
 |11100000| - 9 bytes
      Integer encoded as int64_t (8 bytes).
 |11110000| - 4 bytes
      Integer encoded as 24 bit signed (3 bytes).
 |11111110| - 2 bytes
      Integer encoded as 8 bit signed (1 byte).
 |1111xxxx| - (with xxxx between 0000 and 1101) immediate 4 bit integer.
      Unsigned integer from 0 to 12. The encoded value is actually from
      1 to 13 because 0000 and 1111 can not be used, so 1 should be
      subtracted from the encoded 4 bit value to obtain the right value.
 |11111111| - End of ziplist special entry.</code></pre></div></div><div class=paragraph><p>å¼•ç”¨åœ¨ç½‘ä¸Šæ‰¾çš„ä¾‹å­ï¼Œæ¥åšä¸ªè¯´æ˜ï¼š</p></div><div class=imageblock><div class=content><img src=/images/redis/redis-ziplist-sample.png alt="redis ziplist sample"></div></div><div class="olist arabic"><ol class=arabic><li><p>è¿™ä¸ªziplistä¸€å…±åŒ…å« 33 ä¸ªå­—èŠ‚ã€‚å­—èŠ‚ç¼–å·ä» <code>byte[0]</code> åˆ° <code>byte[32]</code>ã€‚å›¾ä¸­æ¯ä¸ªå­—èŠ‚çš„å€¼ä½¿ç”¨ 16 è¿›åˆ¶è¡¨ç¤ºã€‚</p></li><li><p>å¤´ 4 ä¸ªå­—èŠ‚ï¼ˆ<code>0x21000000</code>ï¼‰æ˜¯æŒ‰å°ç«¯ï¼ˆlittle endianï¼‰æ¨¡å¼å­˜å‚¨çš„ <code>&lt;zlbytes></code> å­—æ®µã€‚ä»€ä¹ˆæ˜¯å°ç«¯å‘¢ï¼Ÿå°±æ˜¯æŒ‡æ•°æ®çš„ä½å­—èŠ‚ä¿å­˜åœ¨å†…å­˜çš„ä½åœ°å€ä¸­ï¼ˆå‚è§ç»´åŸºç™¾ç§‘è¯æ¡ <a href=https://en.wikipedia.org/wiki/Endianness target=_blank rel=noopener>Endianness</a>ï¼‰ã€‚å› æ­¤ï¼Œè¿™é‡Œ <code>&lt;zlbytes></code> çš„å€¼åº”è¯¥è§£ææˆ <code>0x00000021</code>ï¼Œç”¨åè¿›åˆ¶è¡¨ç¤ºæ­£å¥½å°±æ˜¯33ã€‚</p></li><li><p>æ¥ä¸‹æ¥ 4 ä¸ªå­—èŠ‚ï¼ˆ<code>byte[4..7]</code>ï¼‰æ˜¯ <code>&lt;zltail></code>ï¼Œç”¨å°ç«¯å­˜å‚¨æ¨¡å¼æ¥è§£é‡Šï¼Œå®ƒçš„å€¼æ˜¯ <code>0x0000001D</code>ï¼ˆå€¼ä¸º29ï¼‰ï¼Œè¡¨ç¤ºæœ€åä¸€ä¸ªæ•°æ®é¡¹åœ¨ <code>byte[29]</code> çš„ä½ç½®ï¼ˆé‚£ä¸ªæ•°æ®é¡¹ä¸º <code>0x05FE14</code>ï¼‰ã€‚</p></li><li><p>å†æ¥ä¸‹æ¥ 2 ä¸ªå­—èŠ‚ï¼ˆ<code>byte[8..9]</code>ï¼‰ï¼Œå€¼ä¸º <code>0x0004</code>ï¼Œè¡¨ç¤ºè¿™ä¸ª ziplist é‡Œä¸€å…±å­˜æœ‰4é¡¹æ•°æ®ã€‚</p></li><li><p>æ¥ä¸‹æ¥ 6 ä¸ªå­—èŠ‚ï¼ˆ<code>byte[10..15]</code>ï¼‰æ˜¯ç¬¬ 1 ä¸ªæ•°æ®é¡¹ã€‚å…¶ä¸­ï¼Œ<code>prevlen=0</code>ï¼Œå› ä¸ºå®ƒå‰é¢æ²¡æœ‰æ•°æ®é¡¹ï¼›<code>len=4</code>ï¼Œç›¸å½“äºå‰é¢å®šä¹‰çš„9ç§æƒ…å†µä¸­çš„ç¬¬1ç§ï¼Œè¡¨ç¤ºåé¢4ä¸ªå­—èŠ‚æŒ‰å­—ç¬¦ä¸²å­˜å‚¨æ•°æ®ï¼Œæ•°æ®çš„å€¼ä¸ºï¼š<code>name</code>ã€‚</p></li><li><p>æ¥ä¸‹æ¥ 8 ä¸ªå­—èŠ‚ï¼ˆ<code>byte[16..23]</code>ï¼‰æ˜¯ç¬¬ 2 ä¸ªæ•°æ®é¡¹ï¼Œä¸å‰é¢æ•°æ®é¡¹å­˜å‚¨æ ¼å¼ç±»ä¼¼ï¼Œå­˜å‚¨ 1 ä¸ªå­—ç¬¦ä¸²ï¼š<code>tielei</code>ã€‚</p></li><li><p>æ¥ä¸‹æ¥ 5 ä¸ªå­—èŠ‚ï¼ˆ<code>byte[24..28]</code>ï¼‰æ˜¯ç¬¬ 3 ä¸ªæ•°æ®é¡¹ï¼Œä¸å‰é¢æ•°æ®é¡¹å­˜å‚¨æ ¼å¼ç±»ä¼¼ï¼Œå­˜å‚¨ 1 ä¸ªå­—ç¬¦ä¸²ï¼š <code>age</code>ã€‚</p></li><li><p>æ¥ä¸‹æ¥3ä¸ªå­—èŠ‚ï¼ˆ<code>byte[29..31]</code>ï¼‰æ˜¯æœ€åä¸€ä¸ªæ•°æ®é¡¹ï¼Œå®ƒçš„æ ¼å¼ä¸å‰é¢çš„æ•°æ®é¡¹å­˜å‚¨æ ¼å¼ä¸å¤ªä¸€æ ·ã€‚å…¶ä¸­ï¼Œç¬¬ 1 ä¸ªå­—èŠ‚ <code>prevlen=5</code>ï¼Œè¡¨ç¤ºå‰ä¸€ä¸ªæ•°æ®é¡¹å ç”¨ 5 ä¸ªå­—èŠ‚ï¼›ç¬¬ 2 ä¸ªå­—èŠ‚ = <code>FE</code>ï¼Œç›¸å½“äºå‰é¢å®šä¹‰çš„9ç§æƒ…å†µä¸­çš„ç¬¬8ç§ï¼Œæ‰€ä»¥åé¢è¿˜æœ‰1ä¸ªå­—èŠ‚ç”¨æ¥è¡¨ç¤ºçœŸæ­£çš„æ•°æ®ï¼Œå¹¶ä¸”ä»¥æ•´æ•°è¡¨ç¤ºã€‚å®ƒçš„å€¼æ˜¯20ï¼ˆ0x14ï¼‰ã€‚</p></li><li><p>æœ€å1ä¸ªå­—èŠ‚ï¼ˆ<code>byte[32]</code>ï¼‰è¡¨ç¤º <code>&lt;zlend></code>ï¼Œæ˜¯å›ºå®šçš„å€¼255ï¼ˆ0xFFï¼‰ã€‚</p></li></ol></div><div class=paragraph><p>æœ‰ä¸¤ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ï¼š</p></div><div class="qlist qanda"><ol><li><p><em>å¦‚ä½•åå‘éå† ziplist ï¼Ÿ</em></p><p><code>&lt;prevlen></code>: è¡¨ç¤ºå‰ä¸€ä¸ªæ•°æ®é¡¹å ç”¨çš„æ€»å­—èŠ‚æ•°ã€‚é‚£ä¹ˆå°±èƒ½æ‰¾åˆ°å‰ä¸€ä¸ªå…ƒç´ çš„èµ·å§‹ä½ç½®ï¼Œå°±èƒ½å®ç°åå‘éå†ã€‚</p></li><li><p><em>å¦‚ä½•ä» ziplist ä¸­æ·»åŠ /åˆ é™¤æ•°æ®ï¼Ÿåˆ é™¤æ•°æ®åï¼Œå¯¹åº”ä½ç½®çš„ Bits ä½æ€ä¹ˆå¤„ç†ï¼Ÿ</em></p><p>åœ¨æŸä¸ª/æŸäº›èŠ‚ç‚¹çš„å‰é¢æ·»åŠ æ–°èŠ‚ç‚¹ä¹‹åï¼Œ ç¨‹åºå¿…é¡»æ²¿ç€è·¯å¾„æŒ¨ä¸ªæ£€æŸ¥åç»­çš„èŠ‚ç‚¹ï¼Œæ˜¯å¦æ»¡è¶³æ–°é•¿åº¦çš„ç¼–ç è¦æ±‚ï¼Œ ç›´åˆ°é‡åˆ°ä¸€ä¸ªèƒ½æ»¡è¶³è¦æ±‚çš„èŠ‚ç‚¹ï¼ˆå¦‚æœæœ‰ä¸€ä¸ªèƒ½æ»¡è¶³ï¼Œåˆ™è¿™ä¸ªèŠ‚ç‚¹ä¹‹åçš„å…¶ä»–èŠ‚ç‚¹ä¹Ÿæ»¡è¶³ï¼‰ï¼Œ æˆ–è€…åˆ°è¾¾ ziplist çš„æœ«ç«¯ zlend ä¸ºæ­¢ï¼Œ è¿™ç§æ£€æŸ¥æ“ä½œçš„å¤æ‚åº¦ä¸º O(N<sup>2</sup>) ã€‚</p><div class=paragraph><p>å› ä¸ºåªæœ‰åœ¨æ–°æ·»åŠ èŠ‚ç‚¹çš„åé¢æœ‰è¿ç»­å¤šä¸ªé•¿åº¦æ¥è¿‘ 254 çš„èŠ‚ç‚¹æ—¶ï¼Œ è¿™ç§è¿é”æ›´æ–°æ‰ä¼šå‘ç”Ÿï¼Œ æ‰€ä»¥å¯ä»¥æ™®éåœ°è®¤ä¸ºï¼Œ è¿™ç§è¿é”æ›´æ–°å‘ç”Ÿçš„æ¦‚ç‡éå¸¸å°ï¼Œ åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ å°†æ·»åŠ æ“ä½œçœ‹æˆæ˜¯ O(N) å¤æ‚åº¦ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p></div><div class=paragraph><p>åˆ é™¤å…ƒç´ å°±è¿›è¡Œå†…å­˜ç§»ä½ï¼Œè¦†ç›– target åŸæœ¬çš„æ•°æ®ï¼Œç„¶åé€šè¿‡å†…å­˜é‡åˆ†é…ï¼Œæ”¶ç¼©å¤šä½™ç©ºé—´ã€‚</p></div></li></ol></div><div class=paragraph><p>Redis åœ¨ä¸‹é¢è¿™ä¸ªå‡ ä¸ªåœ°æ–¹ä½¿ç”¨äº† ziplistï¼š</p></div><div class="olist arabic"><ol class=arabic><li><p>åˆ—è¡¨åŒ…å«å°‘é‡çš„åˆ—è¡¨é¡¹ï¼Œå¹¶ä¸”åˆ—è¡¨é¡¹åªæ˜¯æ•´æ•°æˆ–è€…çŸ­å°çš„å­—ç¬¦ä¸²æ—¶ã€‚ï¼ˆåœ¨ä¸‹é¢ <a href=#quicklist>quicklist</a> å°èŠ‚ä¸­ï¼Œåœ¨æœ€æ–°ç‰ˆ Redis ä¸­æµ‹è¯•ï¼Œæ˜¾ç¤ºçš„æ˜¯ quicklistï¼Œè€Œ quicklist å†…éƒ¨ä½¿ç”¨çš„æ˜¯ ziplist æ¥å­˜å‚¨æ•°æ®ï¼Œåªæ˜¯å¤–é¢è¢« quicklist åŒ…è£¹ç€ã€‚ï¼‰</p></li><li><p>åœ¨å“ˆå¸Œé”®å€¼åŒ…å«å°‘é‡é”®å€¼å¯¹ï¼Œå¹¶ä¸”æ¯ä¸ªé”®å€¼å¯¹åªåŒ…å«æ•´æ•°æˆ–çŸ­å°å­—ç¬¦ä¸²æ—¶ã€‚</p><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash><span class=nv>$ </span>redis-cli <span class=nt>--raw</span>

127.0.0.1:6379&gt; HMSET site domain <span class=s2>&#34;https://www.diguage.com&#34;</span> owner <span class=s2>&#34;Dç“œå“¥&#34;</span>
OK

127.0.0.1:6379&gt; HGET site domain
https://www.diguage.com

127.0.0.1:6379&gt; HGET site owner
Dç“œå“¥

127.0.0.1:6379&gt; TYPE site
<span class=nb>hash

</span>127.0.0.1:6379&gt; OBJECT encoding site
ziplist</code></pre></div></div></li></ol></div></div></div><div class=sect1><h2 id=quicklist>quicklist</h2><div class=sectionbody><div class=paragraph><p>Redis å¯¹å¤–æš´éœ²çš„ list æ•°æ®ç±»å‹ï¼Œå®ƒåº•å±‚å®ç°æ‰€ä¾èµ–çš„å†…éƒ¨æ•°æ®ç»“æ„å°±æ˜¯ quicklistã€‚</p></div><div class=paragraph><p>list æ˜¯ä¸€ä¸ªèƒ½ç»´æŒæ•°æ®é¡¹å…ˆåé¡ºåºçš„åˆ—è¡¨ï¼ˆå„ä¸ªæ•°æ®é¡¹çš„å…ˆåé¡ºåºç”±æ’å…¥ä½ç½®å†³å®šï¼‰ï¼Œä¾¿äºåœ¨è¡¨çš„ä¸¤ç«¯è¿½åŠ å’Œåˆ é™¤æ•°æ®ï¼Œè€Œå¯¹äºä¸­é—´ä½ç½®çš„å­˜å–å…·æœ‰ O(N) çš„æ—¶é—´å¤æ‚åº¦ã€‚</p></div><div class=quoteblock><blockquote><div class=paragraph><p>quicklist.c - A doubly linked list of ziplists</p></div></blockquote><div class=attribution>â€” redis/quicklist.c</div></div><div class=paragraph><p>Redis åœ¨ <code>quicklist.c</code> å°±è¯´æ˜äº†ï¼Œquicklist æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œè€Œä¸”æ˜¯ä¸€ä¸ª ziplist çš„åŒå‘é“¾è¡¨ã€‚quicklist çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ª ziplistã€‚è¿™æ ·è®¾è®¡å¤§æ¦‚åˆæ˜¯ä¸€ä¸ªç©ºé—´å’Œæ—¶é—´çš„æŠ˜ä¸­ï¼š</p></div><div class="olist arabic"><ol class=arabic><li><p>åŒå‘é“¾è¡¨ä¾¿äºåœ¨è¡¨çš„ä¸¤ç«¯è¿›è¡Œ <code>push</code> å’Œ <code>pop</code> æ“ä½œï¼Œä½†æ˜¯å®ƒçš„å†…å­˜å¼€é”€æ¯”è¾ƒå¤§ã€‚é¦–å…ˆï¼Œå®ƒåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šé™¤äº†è¦ä¿å­˜æ•°æ®ä¹‹å¤–ï¼Œè¿˜è¦é¢å¤–ä¿å­˜ä¸¤ä¸ªæŒ‡é’ˆï¼›å…¶æ¬¡ï¼ŒåŒå‘é“¾è¡¨çš„å„ä¸ªèŠ‚ç‚¹æ˜¯å•ç‹¬çš„å†…å­˜å—ï¼Œåœ°å€ä¸è¿ç»­ï¼ŒèŠ‚ç‚¹å¤šäº†å®¹æ˜“äº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚</p></li><li><p>ziplist ç”±äºæ˜¯ä¸€æ•´å—è¿ç»­å†…å­˜ï¼Œæ‰€ä»¥å­˜å‚¨æ•ˆç‡å¾ˆé«˜ã€‚ä½†æ˜¯ï¼Œå®ƒä¸åˆ©äºä¿®æ”¹æ“ä½œï¼Œæ¯æ¬¡æ•°æ®å˜åŠ¨éƒ½ä¼šå¼•å‘ä¸€æ¬¡å†…å­˜çš„ <code>realloc</code> ã€‚ç‰¹åˆ«æ˜¯å½“ ziplist é•¿åº¦å¾ˆé•¿çš„æ—¶å€™ï¼Œä¸€æ¬¡ <code>realloc</code> å¯èƒ½ä¼šå¯¼è‡´å¤§æ‰¹é‡çš„æ•°æ®æ‹·è´ï¼Œè¿›ä¸€æ­¥é™ä½æ€§èƒ½ã€‚</p></li></ol></div><div class=paragraph><p>äºæ˜¯ï¼Œç»“åˆäº†åŒå‘é“¾è¡¨å’Œ ziplist çš„ä¼˜ç‚¹ï¼Œquicklist å°±åº”è¿è€Œç”Ÿäº†ã€‚</p></div><div class=paragraph><p>æ–°é—®é¢˜ï¼šåˆ°åº•ä¸€ä¸ª quicklist èŠ‚ç‚¹åŒ…å«å¤šé•¿çš„ ziplist åˆé€‚å‘¢ï¼Ÿ</p></div><div class="olist arabic"><ol class=arabic><li><p>æ¯ä¸ªquicklistèŠ‚ç‚¹ä¸Šçš„ziplistè¶ŠçŸ­ï¼Œåˆ™å†…å­˜ç¢ç‰‡è¶Šå¤šã€‚</p></li><li><p>æ¯ä¸ªquicklistèŠ‚ç‚¹ä¸Šçš„ziplistè¶Šé•¿ï¼Œåˆ™ä¸ºzipliståˆ†é…å¤§å—è¿ç»­å†…å­˜ç©ºé—´çš„éš¾åº¦å°±è¶Šå¤§ã€‚</p></li></ol></div><div class=paragraph><p>Redis æä¾›äº†ä¸€ä¸ªé…ç½®å‚æ•° <code>list-max-ziplist-size</code> è®©ä½¿ç”¨è€…å¯ä»¥æ¥æ ¹æ®è‡ªå·±çš„æƒ…å†µè¿›è¡Œè°ƒæ•´:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code>list-max-ziplist-size -2</code></pre></div></div><div class=paragraph><p>è¿™ä¸ªå‚æ•°å¯æ­£å¯è´Ÿï¼š</p></div><div class=ulist><ul><li><p>å½“å–æ­£å€¼çš„æ—¶å€™ï¼Œè¡¨ç¤ºæŒ‰ç…§æ•°æ®é¡¹ä¸ªæ•°æ¥é™å®šæ¯ä¸ª quicklist èŠ‚ç‚¹ä¸Šçš„ ziplist é•¿åº¦ã€‚</p></li><li><p>å½“å–è´Ÿå€¼çš„æ—¶å€™ï¼Œè¡¨ç¤ºæŒ‰ç…§å ç”¨å­—èŠ‚æ•°æ¥é™å®šæ¯ä¸ª quicklist èŠ‚ç‚¹ä¸Šçš„ ziplist é•¿åº¦ã€‚è¿™æ—¶ï¼Œå®ƒåªèƒ½å– <code>-1</code> åˆ° <code>-5</code> è¿™äº”ä¸ªå€¼ï¼Œæ¯ä¸ªå€¼å«ä¹‰å¦‚ä¸‹ï¼š</p><div class=ulist><ul><li><p><code>-5</code>: æ¯ä¸ª quicklist èŠ‚ç‚¹ä¸Šçš„ ziplist å¤§å°ä¸èƒ½è¶…è¿‡ 64 Kbã€‚ï¼ˆæ³¨ï¼š1kb â‡’ 1024 bytesï¼‰</p></li><li><p><code>-4</code>: æ¯ä¸ª quicklist èŠ‚ç‚¹ä¸Šçš„ ziplist å¤§å°ä¸èƒ½è¶…è¿‡ 32 Kbã€‚</p></li><li><p><code>-3</code>: æ¯ä¸ª quicklist èŠ‚ç‚¹ä¸Šçš„ ziplist å¤§å°ä¸èƒ½è¶…è¿‡ 16 Kbã€‚</p></li><li><p><code>-2</code>: æ¯ä¸ª quicklist èŠ‚ç‚¹ä¸Šçš„ ziplist å¤§å°ä¸èƒ½è¶…è¿‡ 8 Kbã€‚ï¼ˆ-2æ˜¯Redisç»™å‡ºçš„é»˜è®¤å€¼ï¼‰</p></li><li><p><code>-1</code>: æ¯ä¸ª quicklist èŠ‚ç‚¹ä¸Šçš„ ziplist å¤§å°ä¸èƒ½è¶…è¿‡ 4 Kbã€‚</p></li></ul></div></li></ul></div><div class=paragraph><p>listçš„è®¾è®¡ç›®æ ‡æ˜¯èƒ½å¤Ÿç”¨æ¥å­˜å‚¨å¾ˆé•¿çš„æ•°æ®åˆ—è¡¨çš„ã€‚å½“åˆ—è¡¨å¾ˆé•¿çš„æ—¶å€™ï¼Œæœ€å®¹æ˜“è¢«è®¿é—®çš„å¾ˆå¯èƒ½æ˜¯ä¸¤ç«¯çš„æ•°æ®ï¼Œä¸­é—´çš„æ•°æ®è¢«è®¿é—®çš„é¢‘ç‡æ¯”è¾ƒä½ã€‚list è¿˜æä¾›äº†ä¸€ä¸ªé€‰é¡¹ï¼Œèƒ½å¤ŸæŠŠä¸­é—´çš„æ•°æ®èŠ‚ç‚¹è¿›è¡Œå‹ç¼©ï¼Œä»è€Œè¿›ä¸€æ­¥èŠ‚çœå†…å­˜ç©ºé—´ã€‚Redis çš„é…ç½®å‚æ•° <code>list-compress-depth</code> å°±æ˜¯ç”¨æ¥å®Œæˆè¿™ä¸ªè®¾ç½®çš„ã€‚</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code>list-compress-depth 0 // 0 æ˜¯ç‰¹æ®Šå€¼ï¼Œè¡¨ç¤ºéƒ½ä¸å‹ç¼©ï¼Œé»˜è®¤å€¼ã€‚</code></pre></div></div><div class=paragraph><p>è¿™ä¸ªå‚æ•°è¡¨ç¤ºä¸€ä¸ªquicklistä¸¤ç«¯ä¸è¢«å‹ç¼©çš„èŠ‚ç‚¹ä¸ªæ•°ã€‚æ³¨ï¼šè¿™é‡Œçš„èŠ‚ç‚¹ä¸ªæ•°æ˜¯æŒ‡quickliståŒå‘é“¾è¡¨çš„èŠ‚ç‚¹ä¸ªæ•°ï¼Œè€Œä¸æ˜¯æŒ‡ziplisté‡Œé¢çš„æ•°æ®é¡¹ä¸ªæ•°ã€‚ä¸€ä¸ª quicklist èŠ‚ç‚¹ä¸Šçš„ ziplistï¼Œå¦‚æœè¢«å‹ç¼©ï¼Œå°±æ˜¯æ•´ä½“è¢«å‹ç¼©çš„ã€‚</p></div><div class=paragraph><p>Redis å¯¹äº quicklist å†…éƒ¨èŠ‚ç‚¹çš„å‹ç¼©ç®—æ³•ï¼Œé‡‡ç”¨çš„ <a href=https://en.wikipedia.org/wiki/LZ4_(compression_algorithm) target=_blank rel=noopener>LZF</a> â€”â€”ä¸€ç§æ— æŸå‹ç¼©ç®—æ³•ã€‚</p></div><div class=sidebarblock><div class=content><div class="olist arabic"><ol class=arabic><li><p>æ·»åŠ è¿‡ç¨‹ä¸­ï¼Œå¦‚ä½•å¤„ç†ä¸­é—´ä½ç½®çš„å‹ç¼©å·¥ä½œï¼Ÿ</p></li><li><p>å¤´éƒ¨æˆ–è€…å°¾éƒ¨åˆ é™¤ï¼Œå¯¼è‡´ quicklistNode çš„éå‹ç¼©èŠ‚ç‚¹ä¸ç¬¦åˆè®¾ç½®ï¼Œæ€ä¹ˆå¤„ç†ï¼Ÿ</p></li><li><p>å¦‚æœä¸­é—´åˆ é™¤ï¼ŒèŠ‚ç‚¹ä¸ºå‹ç¼©èŠ‚ç‚¹ï¼Œæ€ä¹ˆå¤„ç†ï¼Ÿ</p></li></ol></div></div></div><div class=listingblock><div class=title>quicklist.h</div><div class=content><pre class="rouge highlight"><code data-lang=c><span class=cm>/* Node, quicklist, and Iterator are the only data structures used currently. */</span>

<span class=cm>/* quicklistNode is a 32 byte struct describing a ziplist for a quicklist.
 * We use bit fields keep the quicklistNode at 32 bytes.
 * count: 16 bits, max 65536 (max zl bytes is 65k, so max count actually &lt; 32k).
 * encoding: 2 bits, RAW=1, LZF=2.
 * container: 2 bits, NONE=1, ZIPLIST=2.
 * recompress: 1 bit, bool, true if node is temporarry decompressed for usage.
 * attempted_compress: 1 bit, boolean, used for verifying during testing.
 * extra: 10 bits, free for future use; pads out the remainder of 32 bits */</span>
<span class=k>typedef</span> <span class=k>struct</span> <span class=n>quicklistNode</span> <span class=p>{</span>
    <span class=k>struct</span> <span class=n>quicklistNode</span> <span class=o>*</span><span class=n>prev</span><span class=p>;</span>
    <span class=k>struct</span> <span class=n>quicklistNode</span> <span class=o>*</span><span class=n>next</span><span class=p>;</span>
    <span class=kt>unsigned</span> <span class=kt>char</span> <span class=o>*</span><span class=n>zl</span><span class=p>;</span>
    <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>sz</span><span class=p>;</span>             <span class=cm>/* ziplist size in bytes */</span>
    <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>count</span> <span class=o>:</span> <span class=mi>16</span><span class=p>;</span>     <span class=cm>/* count of items in ziplist */</span>
    <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>encoding</span> <span class=o>:</span> <span class=mi>2</span><span class=p>;</span>   <span class=cm>/* RAW==1 or LZF==2 */</span>
    <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>container</span> <span class=o>:</span> <span class=mi>2</span><span class=p>;</span>  <span class=cm>/* NONE==1 or ZIPLIST==2 */</span>
    <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>recompress</span> <span class=o>:</span> <span class=mi>1</span><span class=p>;</span> <span class=cm>/* was this node previous compressed? */</span>
    <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>attempted_compress</span> <span class=o>:</span> <span class=mi>1</span><span class=p>;</span> <span class=cm>/* node can&#39;t compress; too small */</span>
    <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>extra</span> <span class=o>:</span> <span class=mi>10</span><span class=p>;</span> <span class=cm>/* more bits to steal for future usage */</span>
<span class=p>}</span> <span class=n>quicklistNode</span><span class=p>;</span>

<span class=cm>/* quicklistLZF is a 4+N byte struct holding &#39;sz&#39; followed by &#39;compressed&#39;.
 * &#39;sz&#39; is byte length of &#39;compressed&#39; field.
 * &#39;compressed&#39; is LZF data with total (compressed) length &#39;sz&#39;
 * NOTE: uncompressed length is stored in quicklistNode-&gt;sz.
 * When quicklistNode-&gt;zl is compressed, node-&gt;zl points to a quicklistLZF */</span>
<span class=k>typedef</span> <span class=k>struct</span> <span class=n>quicklistLZF</span> <span class=p>{</span>
    <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>sz</span><span class=p>;</span> <span class=cm>/* LZF size in bytes*/</span>
    <span class=kt>char</span> <span class=n>compressed</span><span class=p>[];</span>
<span class=p>}</span> <span class=n>quicklistLZF</span><span class=p>;</span>

<span class=cm>/* Bookmarks are padded with realloc at the end of of the quicklist struct.
 * They should only be used for very big lists if thousands of nodes were the
 * excess memory usage is negligible, and there&#39;s a real need to iterate on them
 * in portions.
 * When not used, they don&#39;t add any memory overhead, but when used and then
 * deleted, some overhead remains (to avoid resonance).
 * The number of bookmarks used should be kept to minimum since it also adds
 * overhead on node deletion (searching for a bookmark to update). */</span>
<span class=k>typedef</span> <span class=k>struct</span> <span class=n>quicklistBookmark</span> <span class=p>{</span>
    <span class=n>quicklistNode</span> <span class=o>*</span><span class=n>node</span><span class=p>;</span>
    <span class=kt>char</span> <span class=o>*</span><span class=n>name</span><span class=p>;</span>
<span class=p>}</span> <span class=n>quicklistBookmark</span><span class=p>;</span>

<span class=cm>/* quicklist is a 40 byte struct (on 64-bit systems) describing a quicklist.
 * &#39;count&#39; is the number of total entries.
 * &#39;len&#39; is the number of quicklist nodes.
 * &#39;compress&#39; is: -1 if compression disabled, otherwise it&#39;s the number
 *                of quicklistNodes to leave uncompressed at ends of quicklist.
 * &#39;fill&#39; is the user-requested (or default) fill factor.
 * &#39;bookmakrs are an optional feature that is used by realloc this struct,
 *      so that they don&#39;t consume memory when not used. */</span>
<span class=k>typedef</span> <span class=k>struct</span> <span class=n>quicklist</span> <span class=p>{</span>
    <span class=n>quicklistNode</span> <span class=o>*</span><span class=n>head</span><span class=p>;</span>
    <span class=n>quicklistNode</span> <span class=o>*</span><span class=n>tail</span><span class=p>;</span>
    <span class=kt>unsigned</span> <span class=kt>long</span> <span class=n>count</span><span class=p>;</span>        <span class=cm>/* total count of all entries in all ziplists */</span>
    <span class=kt>unsigned</span> <span class=kt>long</span> <span class=n>len</span><span class=p>;</span>          <span class=cm>/* number of quicklistNodes */</span>
    <span class=kt>int</span> <span class=n>fill</span> <span class=o>:</span> <span class=n>QL_FILL_BITS</span><span class=p>;</span>              <span class=cm>/* fill factor for individual nodes */</span>
    <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>compress</span> <span class=o>:</span> <span class=n>QL_COMP_BITS</span><span class=p>;</span> <span class=cm>/* depth of end nodes not to compress;0=off */</span>
    <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>bookmark_count</span><span class=o>:</span> <span class=n>QL_BM_BITS</span><span class=p>;</span>
    <span class=n>quicklistBookmark</span> <span class=n>bookmarks</span><span class=p>[];</span>
<span class=p>}</span> <span class=n>quicklist</span><span class=p>;</span>

<span class=k>typedef</span> <span class=k>struct</span> <span class=n>quicklistIter</span> <span class=p>{</span>
    <span class=k>const</span> <span class=n>quicklist</span> <span class=o>*</span><span class=n>quicklist</span><span class=p>;</span>
    <span class=n>quicklistNode</span> <span class=o>*</span><span class=n>current</span><span class=p>;</span>
    <span class=kt>unsigned</span> <span class=kt>char</span> <span class=o>*</span><span class=n>zi</span><span class=p>;</span>
    <span class=kt>long</span> <span class=n>offset</span><span class=p>;</span> <span class=cm>/* offset in current ziplist */</span>
    <span class=kt>int</span> <span class=n>direction</span><span class=p>;</span>
<span class=p>}</span> <span class=n>quicklistIter</span><span class=p>;</span>

<span class=k>typedef</span> <span class=k>struct</span> <span class=n>quicklistEntry</span> <span class=p>{</span>
    <span class=k>const</span> <span class=n>quicklist</span> <span class=o>*</span><span class=n>quicklist</span><span class=p>;</span>
    <span class=n>quicklistNode</span> <span class=o>*</span><span class=n>node</span><span class=p>;</span>
    <span class=kt>unsigned</span> <span class=kt>char</span> <span class=o>*</span><span class=n>zi</span><span class=p>;</span>
    <span class=kt>unsigned</span> <span class=kt>char</span> <span class=o>*</span><span class=n>value</span><span class=p>;</span>
    <span class=kt>long</span> <span class=kt>long</span> <span class=n>longval</span><span class=p>;</span>
    <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>sz</span><span class=p>;</span>
    <span class=kt>int</span> <span class=n>offset</span><span class=p>;</span>
<span class=p>}</span> <span class=n>quicklistEntry</span><span class=p>;</span></code></pre></div></div><div class=imageblock><div class=content><img src=/images/redis/redis-quicklist-structure.png alt="redis quicklist structure"></div></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=bash><span class=nv>$ </span>redis-cli <span class=nt>--raw</span>

127.0.0.1:6379&gt; RPUSH names diguage <span class=s2>&#34;Dç“œå“¥&#34;</span> <span class=s2>&#34;https://www.diguage.com/&#34;</span>
2

127.0.0.1:6379&gt; LRANGE names 0 <span class=nt>-1</span>
diguage
Dç“œå“¥
https://www.diguage.com/

127.0.0.1:6379&gt; TYPE names
list

127.0.0.1:6379&gt; OBJECT encoding names
quicklist</code></pre></div></div><div class=paragraph><p>æœ¬æ–‡ç¯‡å¹…å·²ç»å¾ˆé•¿ï¼Œå…¶ä½™æ•°æ®ç»“æ„ï¼Œæ”¾åœ¨ä¸‹ä¸€ç¯‡å†…å®¹æ¥è®²è§£ï¼š <a href=https://www.diguage.com/post/redis-core-data-structure-2/>Redis æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ2ï¼‰</a>ã€‚</p></div></div></div><div class=sect1><h2 id=_å‚è€ƒèµ„æ–™>å‚è€ƒèµ„æ–™</h2><div class=sectionbody><div class="olist arabic"><ol class=arabic><li><p><a href=https://diguage.github.io/jdk-source-analysis/ target=_blank rel=noopener>JDK æºç åˆ†æ</a></p></li><li><p><a href=http://zhangtielei.com/posts/blog-redis-ziplist.html target=_blank rel=noopener>Rediså†…éƒ¨æ•°æ®ç»“æ„è¯¦è§£(4)â€”â€”ziplist</a></p></li><li><p><a href=http://zhangtielei.com/posts/blog-redis-quicklist.html target=_blank rel=noopener>Rediså†…éƒ¨æ•°æ®ç»“æ„è¯¦è§£(5)â€”â€”quicklist</a></p></li><li><p><a href=https://programmer.help/blogs/redis-source-code-day-reading-compressed-list-ziplist.html target=_blank rel=noopener>[redis source code day reading] compressed list (ziplist)</a></p></li><li><p><a href=https://redisbook.readthedocs.io/en/latest/compress-datastruct/ziplist.html target=_blank rel=noopener>å‹ç¼©åˆ—è¡¨ â€” Redis è®¾è®¡ä¸å®ç°</a></p></li></ol></div></div></div></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E5%AD%98%E5%82%A8/ rel=tag>å­˜å‚¨</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E8%AE%BE%E8%AE%A1/ rel=tag>è®¾è®¡</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E6%9E%B6%E6%9E%84/ rel=tag>æ¶æ„</a></li></ul></div></footer></article></main><div class=clearfix><h3>çœ‹åœ¨Dç“œå“¥ç å­—çš„è¾›è‹¦ä¸Šï¼Œè¯·å‹æƒ…æ”¯æŒä¸€ä¸‹ï¼ŒDç“œå“¥æ„Ÿæ¿€ä¸å°½ï¼ŒğŸ˜œ</h3><table><tr><td><img alt=å¾®ä¿¡æ‰“èµç  src=/images/wxpay.jpg></td><td><img alt=æ”¯ä»˜å®æ‰“èµç  src=/images/alipay.png></td></tr></table></div><br><div class=clearfix><h3>æ¬¢è¿å…³æ³¨Dç“œå“¥çš„å¾®ä¿¡å…¬ä¼—å·ï¼Œåœ¨å…¬ä¼—å·å¯ä»¥è·å–æˆ‘çš„å¾®ä¿¡äºŒç»´ç ï¼š</h3><img alt=å¾®ä¿¡å…¬ä¼—å· src=/images/wx-jikerizhi.jpg></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><i class="fa icon-tip" title=Tip></i></td><td class=content><strong>å…¬ä¼—å·çš„å¾®ä¿¡å·æ˜¯: <code>jikerizhi</code></strong>ã€‚å¦‚æœå›¾ç‰‡åŠ è½½ä¸å‡ºæ¥ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡æœç´¢å…¬ä¼—å·çš„å¾®ä¿¡å·æ¥æŸ¥æ‰¾Dç“œå“¥çš„å…¬ä¼—å·ã€‚</td></tr></tbody></table></div><div class="authorbox clearfix"><figure class=authorbox__avatar><a target=_blank href=/about/><img alt="Dç“œå“¥ avatar" src=/images/avatar.jpg class=avatar height=110 width=110></a></figure><div class=authorbox__header><span class=authorbox__name>å…³äº Dç“œå“¥</span></div><div class=authorbox__description>å¨è‰ºç•Œæœ€å¥½çš„ç å†œï¼ŒæŒ¨è¸¢ç•Œæœ€æ£’çš„å¨å¸ˆã€‚<ul><li><a target=_blank href=https://wordpress.diguage.com/>æ—§ç‰ˆâ€œåœ°ç“œå“¥â€åšå®¢ç½‘</a></li><li><a target=_blank href=https://notes.diguage.com/mysql/>MySQL å­¦ä¹ ç¬”è®°<sup>Alpha</sup></a></li><li><a target=_blank href=https://diguage.github.io/jdk-source-analysis/>JDK æºç åˆ†æ<sup>Alpha</sup></a></li></ul></div></div><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/post/kafka-interview-questions/ rel=prev><span class=pager__subtitle>Â«&#8201;ä¸Šä¸€ç¯‡</span><p class=pager__title>Kafka å¸¸è§é¢è¯•é¢˜</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/post/redis-core-data-structure-2/ rel=next><span class=pager__subtitle>ä¸‹ä¸€ç¯‡&#8201;Â»</span><p class=pager__title>Redis æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆäºŒï¼‰</p></a></div></nav><section class=comments><div id=SOHUCS sid=/post/redis-core-data-structure-1/></div><script type=text/javascript>(function(){if(window.location.hostname==="localhost")return;var n,e="cyuuTeBp3",t="prod_2906c47c31e735e0ed518282fec489a6",s=window.innerWidth||document.documentElement.clientWidth;s<960?window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id='+e+"&conf="+t+'"><\/script>'):(n=function(e,t){var s=document.getElementsByTagName("head")[0]||document.head||document.documentElement,n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("charset","UTF-8"),n.setAttribute("src",e),typeof t=="function"&&(window.attachEvent?n.onreadystatechange=function(){var e=n.readyState;(e==="loaded"||e==="complete")&&(n.onreadystatechange=null,t())}:n.onload=t),s.appendChild(n)},n("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:e,conf:t})}))})()</script></section></div><aside class=sidebar><div class="widget-search widget"><form class=widget-search__form role=search method=get action=https://google.com/search><label><input class=widget-search__field type=search placeholder=æœç´¢â€¦ name=q aria-label=æœç´¢â€¦>
</label><input class=widget-search__submit type=submit value=Search>
<input type=hidden name=sitesearch value=https://www.diguage.com/></form></div><div class="widget-wechat widget"><h4 class=widget__title>å¾®ä¿¡å…¬ä¼—å·</h4><img alt=å¾®ä¿¡å…¬ä¼—å· class=center src=/images/wx-jikerizhi-qrcode.jpg></div><div class="widget-wechat widget"><h4 class=widget__title>çŸ¥è¯†æ˜Ÿçƒ</h4><img alt=å¾®ä¿¡å…¬ä¼—å· class=center src=/images/zhishixingqiu.png></div><div class="widget-recent widget"><h4 class=widget__title>è¿‘æœŸæ–‡ç« </h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/post/spring-boot-startup-process-overview/>Spring Boot å¯åŠ¨æµç¨‹æ¦‚è¿°</a></li><li class=widget__item><a class=widget__link href=/post/redis-core-data-structure-4/>Redis æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆå››ï¼‰</a></li><li class=widget__item><a class=widget__link href=/post/redis-core-data-structure-3/>Redis æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆä¸‰ï¼‰</a></li><li class=widget__item><a class=widget__link href=/post/algorithm-pattern-subsets/>ç®—æ³•æ¨¡å¼ï¼šå­é›†</a></li><li class=widget__item><a class=widget__link href=/post/algorithm-pattern-backtracking/>ç®—æ³•æ¨¡å¼ï¼šå›æº¯</a></li><li class=widget__item><a class=widget__link href=/post/algorithm-pattern-transform-and-conquer/>ç®—æ³•æ¨¡å¼ï¼šå˜æ²»æ³•</a></li><li class=widget__item><a class=widget__link href=/post/algorithm-pattern-divide-and-conquer/>ç®—æ³•æ¨¡å¼ï¼šåˆ†æ²»æ³•</a></li><li class=widget__item><a class=widget__link href=/post/algorithm-pattern-decrease-and-conquer/>ç®—æ³•æ¨¡å¼ï¼šå‡æ²»æ³•</a></li><li class=widget__item><a class=widget__link href=/post/algorithm-pattern-topological-sort/>ç®—æ³•æ¨¡å¼ï¼šæ‹“æ‰‘æ’åº</a></li><li class=widget__item><a class=widget__link href=/post/algorithm-pattern-union-find/>ç®—æ³•æ¨¡å¼ï¼šå¹¶æŸ¥é›†</a></li><li class=widget__item><a class=widget__link href=/post/algorithm-pattern-trie/>ç®—æ³•æ¨¡å¼ï¼šå‰ç¼€æ ‘</a></li><li class=widget__item><a class=widget__link href=/post/algorithm-pattern-depth-first-search/>ç®—æ³•æ¨¡å¼ï¼šæ·±åº¦ä¼˜å…ˆæœç´¢</a></li><li class=widget__item><a class=widget__link href=/post/algorithm-pattern-breadth-first-search/>ç®—æ³•æ¨¡å¼ï¼šå¹¿åº¦ä¼˜å…ˆæœç´¢</a></li><li class=widget__item><a class=widget__link href=/post/algorithm-pattern-k-way-merge/>ç®—æ³•æ¨¡å¼ï¼šå¤šè·¯å½’å¹¶</a></li><li class=widget__item><a class=widget__link href=/post/algorithm-pattern-two-heaps/>ç®—æ³•æ¨¡å¼ï¼šåŒå †</a></li><li class=widget__item><a class=widget__link href=/post/algorithm-pattern-cyclic-sort/>ç®—æ³•æ¨¡å¼ï¼šå¾ªç¯æ’åº</a></li><li class=widget__item><a class=widget__link href=/post/algorithm-pattern-quickselect/>ç®—æ³•æ¨¡å¼ï¼šå¿«é€Ÿé€‰æ‹©</a></li><li class=widget__item><a class=widget__link href=/post/algorithm-pattern-top-k-elements/>ç®—æ³•æ¨¡å¼ï¼šTop K é—®é¢˜</a></li><li class=widget__item><a class=widget__link href=/post/algorithm-pattern-monotonic-stack/>ç®—æ³•æ¨¡å¼ï¼šå•è°ƒæ ˆ</a></li><li class=widget__item><a class=widget__link href=/post/algorithm-pattern-sliding-window/>ç®—æ³•æ¨¡å¼ï¼šæ»‘åŠ¨çª—å£</a></li></ul></div></div><div class="widget-categories widget"><h4 class=widget__title>åˆ†ç±»</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/categories/%E4%B8%AA%E4%BA%BA%E6%88%90%E9%95%BF/>ä¸ªäººæˆé•¿</a></li><li class=widget__item><a class=widget__link href=/categories/%E5%88%86%E5%B8%83%E5%BC%8F/>åˆ†å¸ƒå¼</a></li><li class=widget__item><a class=widget__link href=/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/>å¼€å‘å·¥å…·</a></li><li class=widget__item><a class=widget__link href=/categories/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/>æ€§èƒ½ä¼˜åŒ–</a></li><li class=widget__item><a class=widget__link href=/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/>æ“ä½œç³»ç»Ÿ</a></li><li class=widget__item><a class=widget__link href=/categories/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/>æ•°æ®å­˜å‚¨</a></li><li class=widget__item><a class=widget__link href=/categories/%E6%96%87%E5%AD%A6/>æ–‡å­¦</a></li><li class=widget__item><a class=widget__link href=/categories/%E6%96%B9%E6%B3%95%E8%AE%BA/>æ–¹æ³•è®º</a></li><li class=widget__item><a class=widget__link href=/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/>ç¨‹åºè®¾è®¡</a></li><li class=widget__item><a class=widget__link href=/categories/%E7%AE%97%E6%B3%95/>ç®—æ³•</a></li><li class=widget__item><a class=widget__link href=/categories/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/>ç³»ç»Ÿæ¶æ„</a></li><li class=widget__item><a class=widget__link href=/categories/%E7%BB%8F%E6%B5%8E%E9%87%91%E8%9E%8D/>ç»æµé‡‘è</a></li><li class=widget__item><a class=widget__link href=/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/>ç¼–ç¨‹è¯­è¨€</a></li><li class=widget__item><a class=widget__link href=/categories/%E7%BD%91%E7%BB%9C/>ç½‘ç»œ</a></li><li class=widget__item><a class=widget__link href=/categories/%E8%81%8C%E4%B8%9A%E5%8F%91%E5%B1%95/>èŒä¸šå‘å±•</a></li><li class=widget__item><a class=widget__link href=/categories/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/>è½¯ä»¶å·¥ç¨‹</a></li><li class=widget__item><a class=widget__link href=/categories/%E9%80%B8%E9%97%BB%E8%B6%A3%E4%BA%8B/>é€¸é—»è¶£äº‹</a></li><li class=widget__item><a class=widget__link href=/categories/%E9%98%85%E8%AF%BB%E6%91%98%E8%A6%81/>é˜…è¯»æ‘˜è¦</a></li></ul></div></div><div class="widget-taglist widget"><h4 class=widget__title>æ ‡ç­¾</h4><div class=widget__content><a class="widget-taglist__link widget__link btn" href=/tags/gc/ title=GC>GC (9)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/http/ title=HTTP>HTTP (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/java/ title=Java>Java (64)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/jvm/ title=JVM>JVM (2)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/kpi/ title=KPI>KPI (4)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/kubernetes/ title=Kubernetes>Kubernetes (10)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/linux/ title=Linux>Linux (12)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/okr/ title=OKR>OKR (5)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/redis/ title=Redis>Redis (2)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/shell/ title=Shell>Shell (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/spring/ title=Spring>Spring (26)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/tcp/ title=TCP>TCP (2)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/udp/ title=UDP>UDP (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/zookeeper/ title=ZooKeeper>ZooKeeper (2)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E4%B8%AA%E4%BA%BA%E6%8F%90%E5%8D%87/ title=ä¸ªäººæå‡>ä¸ªäººæå‡ (10)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E4%B9%A6%E7%B1%8D/ title=ä¹¦ç±>ä¹¦ç± (15)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E4%BA%A7%E5%93%81/ title=äº§å“>äº§å“ (7)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%80%BA%E5%88%B8/ title=å€ºåˆ¸>å€ºåˆ¸ (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%88%86%E5%B8%83%E5%BC%8F/ title=åˆ†å¸ƒå¼>åˆ†å¸ƒå¼ (15)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%88%86%E6%B2%BB/ title=åˆ†æ²»>åˆ†æ²» (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/ title=åŠ¨æ€è§„åˆ’>åŠ¨æ€è§„åˆ’ (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%9B%A2%E9%98%9F%E5%BB%BA%E8%AE%BE/ title=å›¢é˜Ÿå»ºè®¾>å›¢é˜Ÿå»ºè®¾ (6)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%9B%A2%E9%98%9F%E6%96%87%E5%8C%96/ title=å›¢é˜Ÿæ–‡åŒ–>å›¢é˜Ÿæ–‡åŒ– (4)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%9B%BE/ title=å›¾>å›¾ (7)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%9F%BA%E9%87%91/ title=åŸºé‡‘>åŸºé‡‘ (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%A0%86/ title=å †>å † (3)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%AD%98%E5%82%A8/ title=å­˜å‚¨>å­˜å‚¨ (6)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%B7%A5%E4%BD%9C%E6%96%B9%E6%B3%95/ title=å·¥ä½œæ–¹æ³•>å·¥ä½œæ–¹æ³• (5)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%B9%B6%E5%8F%91/ title=å¹¶å‘>å¹¶å‘ (3)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%BA%8F%E5%88%97%E5%8C%96/ title=åºåˆ—åŒ–>åºåˆ—åŒ– (10)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/ title=å¾®æœåŠ¡>å¾®æœåŠ¡ (17)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%BF%83%E7%90%86%E5%AD%A6/ title=å¿ƒç†å­¦>å¿ƒç†å­¦ (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/ title=æ€§èƒ½æµ‹è¯•>æ€§èƒ½æµ‹è¯• (4)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E6%8A%95%E8%B5%84%E7%90%86%E8%B4%A2/ title=æŠ•èµ„ç†è´¢>æŠ•èµ„ç†è´¢ (5)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/ title=æ•°æ®åº“>æ•°æ®åº“ (10)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/ title=æ•°æ®ç»“æ„>æ•°æ®ç»“æ„ (4)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E6%95%B0%E7%BB%84/ title=æ•°ç»„>æ•°ç»„ (13)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E6%96%B9%E6%B3%95%E8%AE%BA/ title=æ–¹æ³•è®º>æ–¹æ³•è®º (13)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E6%97%85%E8%A1%8C/ title=æ—…è¡Œ>æ—…è¡Œ (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/ title=æœ€ä½³å®è·µ>æœ€ä½³å®è·µ (10)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E6%9E%B6%E6%9E%84/ title=æ¶æ„>æ¶æ„ (44)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E6%A0%88/ title=æ ˆ>æ ˆ (3)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E6%A0%91/ title=æ ‘>æ ‘ (11)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E6%B2%9F%E9%80%9A%E6%8A%80%E5%B7%A7/ title=æ²Ÿé€šæŠ€å·§>æ²Ÿé€šæŠ€å·§ (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ title=æºç åˆ†æ>æºç åˆ†æ (8)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E7%90%86%E8%B4%A2/ title=ç†è´¢>ç†è´¢ (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E7%94%9F%E6%B4%BB/ title=ç”Ÿæ´»>ç”Ÿæ´» (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E7%AC%94%E8%AE%B0/ title=ç¬”è®°>ç¬”è®° (5)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E7%AE%97%E6%B3%95/ title=ç®—æ³•>ç®—æ³• (8)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E7%AE%97%E6%B3%95%E6%A8%A1%E5%BC%8F/ title=ç®—æ³•æ¨¡å¼>ç®—æ³•æ¨¡å¼ (23)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E7%BB%8F%E6%B5%8E/ title=ç»æµ>ç»æµ (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E7%BC%96%E7%A0%81/ title=ç¼–ç >ç¼–ç  (3)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E7%BD%91%E7%BB%9C/ title=ç½‘ç»œ>ç½‘ç»œ (2)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E7%BF%BB%E8%AF%91/ title=ç¿»è¯‘>ç¿»è¯‘ (7)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E8%82%A1%E7%A5%A8/ title=è‚¡ç¥¨>è‚¡ç¥¨ (5)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E8%84%91%E5%9B%BE/ title=è„‘å›¾>è„‘å›¾ (5)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E8%8A%82%E6%97%A5/ title=èŠ‚æ—¥>èŠ‚æ—¥ (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E8%8B%B1%E8%AF%AD/ title=è‹±è¯­>è‹±è¯­ (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/ title=è™šæ‹Ÿæœº>è™šæ‹Ÿæœº (9)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E8%AE%BA%E6%96%87/ title=è®ºæ–‡>è®ºæ–‡ (2)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E8%AE%BE%E8%AE%A1/ title=è®¾è®¡>è®¾è®¡ (36)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/ title=è®¾è®¡æ¨¡å¼>è®¾è®¡æ¨¡å¼ (3)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E8%AF%97%E6%AD%8C/ title=è¯—æ­Œ>è¯—æ­Œ (2)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E8%AF%BB%E4%B9%A6/ title=è¯»ä¹¦>è¯»ä¹¦ (5)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E9%80%92%E5%BD%92/ title=é€’å½’>é€’å½’ (1)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E9%87%91%E8%9E%8D/ title=é‡‘è>é‡‘è (5)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E9%93%BE%E8%A1%A8/ title=é“¾è¡¨>é“¾è¡¨ (5)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/ title=é¢å‘å¯¹è±¡>é¢å‘å¯¹è±¡ (5)</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/ title=é¢†åŸŸé©±åŠ¨è®¾è®¡>é¢†åŸŸé©±åŠ¨è®¾è®¡ (5)</a></div></div><div class="widget-social widget"><h4 class="widget-social__title widget__title">ç¤¾äº¤</h4><div class="widget-social__content widget__content"><div class="widget-social__item widget__item"><a class="widget-social__link widget__link btn" title=Twitter rel="noopener noreferrer" href=https://twitter.com/diguage target=_blank><svg class="widget-social__link-icon icon icon-twitter" width="24" height="24" viewBox="0 0 384 312"><path d="m384 36.9c-14.1 6.3-29.3 10.5-45.2 12.4 16.3-9.7 28.8-25.2 34.6-43.6-15.2 9-32.1 15.6-50 19.1-14.4-15.2-34.9-24.8-57.5-24.8-43.5.0-78.8 35.3-78.8 78.8.0 6.2.7 12.2 2 17.9-65.5-3.3-123.5-34.6-162.4-82.3C20 26 16.1 39.6 16.1 54c0 27.3 13.9 51.4 35 65.6-12.9-.4-25.1-4-35.7-9.9v1c0 38.2 27.2 70 63.2 77.2-6.6 1.8-13.6 2.8-20.8 2.8-5.1.0-10-.5-14.8-1.4 10 31.3 39.1 54.1 73.6 54.7-27 21.1-60.9 33.7-97.8 33.7-6.4.0-12.6-.4-18.8-1.1C34.9 299 76.3 312 120.8 312c144.9.0 224.1-120 224.1-224.1.0-3.4-.1-6.8-.2-10.2 15.4-11.1 28.7-25 39.3-40.8z"/></svg>
<span>Twitter</span></a></div><div class="widget-social__item widget__item"><a class="widget-social__link widget__link btn" title=GitHub rel="noopener noreferrer" href=https://github.com/diguage target=_blank><svg class="widget-social__link-icon icon icon-github" width="24" height="24" viewBox="0 0 384 374"><path d="m192 0C85.9.0.0 85.8.0 191.7c0 84.7 55 156.6 131.3 181.9 9.6 1.8 13.1-4.2 13.1-9.2.0-4.6-.2-16.6-.3-32.6-53.4 11.6-64.7-25.7-64.7-25.7-8.7-22.1-21.3-28-21.3-28-17.4-11.9 1.3-11.6 1.3-11.6 19.3 1.4 29.4 19.8 29.4 19.8 17.1 29.3 44.9 20.8 55.9 15.9 1.7-12.4 6.7-20.8 12.2-25.6-42.6-4.8-87.5-21.3-87.5-94.8.0-20.9 7.5-38 19.8-51.4-2-4.9-8.6-24.3 1.9-50.7.0.0 16.1-5.2 52.8 19.7 15.3-4.2 31.7-6.4 48.1-6.5 16.3.1 32.7 2.2 48.1 6.5 36.7-24.8 52.8-19.7 52.8-19.7 10.5 26.4 3.9 45.9 1.9 50.7 12.3 13.4 19.7 30.5 19.7 51.4.0 73.7-44.9 89.9-87.7 94.6 6.9 5.9 13 17.6 13 35.5.0 25.6-.2 46.3-.2 52.6.0 5.1 3.5 11.1 13.2 9.2C329 348.2 384 276.4 384 191.7 384 85.8 298 0 192 0z"/></svg>
<span>GitHub</span></a></div><div class="widget-social__item widget__item"><a class="widget-social__link widget__link btn" title=Email href=mailto:leejun119@gmail.com><svg class="widget-social__link-icon icon icon-mail" width="24" height="24" viewBox="0 0 416 288"><path d="m0 16v256 16h16 384 16v-16V16 0h-16H16 0zm347 16-139 92.5L69 32zM199 157.5l9 5.5 9-5.5L384 46v210H32V46z"/></svg>
<span>leejun119@gmail.com</span></a></div></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 "åœ°ç“œå“¥"åšå®¢ç½‘.
<span class=footer__copyright-credits>åŸºäº <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> å¼•æ“å’Œ <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> ä¸»é¢˜</span>
<span><a href=https://beian.miit.gov.cn/ target=_target>äº¬ICPå¤‡14046450å·-4</a></span></div></div></footer></div><script async defer src=/js/menu.js></script><script type=text/x-mathjax-config>
	MathJax.Hub.Config({
	  messageStyle: "none",
	  tex2jax: {
		inlineMath: [["\\(", "\\)"]],
		displayMath: [["\\[", "\\]"]],
		ignoreClass: "nostem|nolatexmath"
	  },
	  asciimath2jax: {
		delimiters: [["\\$", "\\$"]],
		ignoreClass: "nostem|noasciimath"
	  },
	  TeX: { equationNumbers: { autoNumber: "none" } }
	})
	MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
	  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
		if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
		  data.math.root.display = "block"
		}
		return data
	  })
	})
</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML" async></script></body></html>