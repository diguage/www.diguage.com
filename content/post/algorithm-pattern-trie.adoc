---
title: "ç®—æ³•æ¨¡å¼ï¼šå‰ç¼€æ ‘"
date: 2025-04-02T19:16:24+08:00
draft: false
keywords: ["å‰ç¼€æ ‘","å­—å…¸æ ‘","æ ‘", "ç®—æ³•", "LeetCode"]
tags: ["æ ‘","ç®—æ³•æ¨¡å¼"]
categories: ["ç®—æ³•"]
thumbnail: "images/data-structure/trie.png"
weight: 1
---

åœ¨ä¸Šä¸€ç¯‡æ–‡ç«  https://www.diguage.com/post/algorithm-pattern-depth-first-search/[ç®—æ³•æ¨¡å¼ï¼šæ·±åº¦ä¼˜å…ˆæœç´¢^] ä»‹ç»äº†ä»‹ç»ä¸€ç§å³é€‚ç”¨äºæ ‘ï¼Œåˆé€‚ç”¨äºå›¾çš„çš„ç®—æ³•æ¨¡å¼ã€‚æœ¬ç¯‡æ–‡ç« ï¼Œä»‹ç»ä¸€ç§å…³äºç‰¹æ®Šçš„æ ‘çš„ç®—æ³•æ¨¡å¼ï¼šå‰ç¼€æ ‘ã€‚

== å‰ç¼€æ ‘

å‰ç¼€æ ‘ï¼Œåˆç§°ä¸ºå­—å…¸æ ‘ï¼Œè¿˜å«å•è¯æŸ¥æ‰¾æ ‘ï¼Œè‹±æ–‡æ˜¯ Trieï¼Œä¹Ÿæœ‰å« Prefix Treeã€‚é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä¸€ä¸ªåƒå­—å…¸ä¸€æ ·çš„æ ‘ã€‚å¦‚å›¾ï¼š

image::/images/data-structure/trie.svg[title="å‰ç¼€æ ‘",alt="å‰ç¼€æ ‘",{image_attr}]

å‰ç¼€æ ‘æ˜¯ä¸€ç§æœ‰åºæ ‘ï¼Œç”¨äºä¿å­˜å…³è”æ•°ç»„ï¼Œå…¶ä¸­çš„é”®é€šå¸¸æ˜¯å­—ç¬¦ä¸²ã€‚ä¸äºŒå‰æŸ¥æ‰¾æ ‘ä¸åŒï¼Œé”®ä¸æ˜¯ç›´æ¥ä¿å­˜åœ¨èŠ‚ç‚¹ä¸­ï¼Œè€Œæ˜¯ç”±èŠ‚ç‚¹åœ¨æ ‘ä¸­çš„ä½ç½®å†³å®šã€‚ä¸€ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰å­å­™éƒ½æœ‰ç›¸åŒçš„å‰ç¼€ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªèŠ‚ç‚¹å¯¹åº”çš„å­—ç¬¦ä¸²ï¼Œè€Œæ ¹èŠ‚ç‚¹å¯¹åº”ç©ºå­—ç¬¦ä¸²ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸æ˜¯æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æœ‰å¯¹åº”çš„å€¼ï¼Œåªæœ‰å¶å­èŠ‚ç‚¹å’Œéƒ¨åˆ†å†…éƒ¨èŠ‚ç‚¹æ‰€å¯¹åº”çš„é”®æ‰æœ‰ç›¸å…³çš„å€¼ã€‚


== LeetCode 208. å®ç° Trie (å‰ç¼€æ ‘)

https://leetcode.cn/problems/implement-trie-prefix-tree/[LeetCode - 208. å®ç° Trie (å‰ç¼€æ ‘) ^]

*link:https://baike.baidu.com/item/å­—å…¸æ ‘/9825209?fr=aladdin[Trie]*ï¼ˆå‘éŸ³ç±»ä¼¼ "try"ï¼‰æˆ–è€…è¯´ *å‰ç¼€æ ‘* æ˜¯ä¸€ç§æ ‘å½¢æ•°æ®ç»“æ„ï¼Œç”¨äºé«˜æ•ˆåœ°å­˜å‚¨å’Œæ£€ç´¢å­—ç¬¦ä¸²æ•°æ®é›†ä¸­çš„é”®ã€‚è¿™ä¸€æ•°æ®ç»“æ„æœ‰ç›¸å½“å¤šçš„åº”ç”¨æƒ…æ™¯ï¼Œä¾‹å¦‚è‡ªåŠ¨è¡¥å…¨å’Œæ‹¼å†™æ£€æŸ¥ã€‚

è¯·ä½ å®ç° Trie ç±»ï¼š

* `Trie()` åˆå§‹åŒ–å‰ç¼€æ ‘å¯¹è±¡ã€‚
* `void insert(String word)` å‘å‰ç¼€æ ‘ä¸­æ’å…¥å­—ç¬¦ä¸² `word` ã€‚
* `boolean search(String word)` å¦‚æœå­—ç¬¦ä¸² `word` åœ¨å‰ç¼€æ ‘ä¸­ï¼Œè¿”å› `true`ï¼ˆå³ï¼Œåœ¨æ£€ç´¢ä¹‹å‰å·²ç»æ’å…¥ï¼‰ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚
* `boolean startsWith(String prefix)` å¦‚æœä¹‹å‰å·²ç»æ’å…¥çš„å­—ç¬¦ä¸² `word` çš„å‰ç¼€ä¹‹ä¸€ä¸º `prefix` ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚


*ç¤ºä¾‹ï¼š*

....
è¾“å…¥
["Trie", "insert", "search", "search", "startsWith", "insert", "search"]
[[], ["apple"], ["apple"], ["app"], ["app"], ["app"], ["app"]]
è¾“å‡º
[null, null, true, false, true, null, true]

è§£é‡Š
Trie trie = new Trie();
trie.insert("apple");
trie.search("apple");   // è¿”å› True
trie.search("app");     // è¿”å› False
trie.startsWith("app"); // è¿”å› True
trie.insert("app");
trie.search("app");     // è¿”å› True
....

*æç¤ºï¼š*

* `+1 <= word.length, prefix.length <= 2000+`
* `word` å’Œ `prefix` ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
* `insert`ã€`search` å’Œ `startsWith` è°ƒç”¨æ¬¡æ•° *æ€»è®¡* ä¸è¶…è¿‡ `3 * 10^4^` æ¬¡

=== æ€è·¯åˆ†æ

æ‰€è°“å‰ç¼€æ ‘ï¼Œå°±æ˜¯å°†å•è¯æ‹†åˆ†æˆå­—ç¬¦ï¼Œä¾æ¬¡å°†å…¶â€œæ·»åŠ â€åˆ°ä¸€æ£µæ ‘ä¸Šã€‚ä»æ ¹èŠ‚ç‚¹åˆ°ç»“æŸèŠ‚ç‚¹ï¼Œä¸€æ¡è·¯å¾„è¡¨ç¤ºä¸€ä¸ªå•è¯ã€‚æ‰€ä»¥ï¼Œå°±æ˜¯å®ç°å­—å…¸æ ‘ï¼Œå°±æ˜¯æ„é€ è¿™æ ·ä¸€æ£µæ ‘ã€‚ä»£ç å¦‚ä¸‹ï¼š

[source%nowrap,java,{source_attr}]
----
/**
 * æ²¡æƒ³åˆ°ç«Ÿç„¶ä¸€æ¬¡é€šè¿‡ï¼ŒğŸ˜
 *
 * @author Dç“œå“¥ Â· https://www.diguage.com
 * @since 2025-04-02 19:42:48
 */
class Trie {
  private Map<Character, Node> trie;

  public Trie() {
    trie = new HashMap<>();
  }

  public void insert(String word) {
    Map<Character, Node> curr = trie;
    Node node = null;
    for (int i = 0; i < word.length(); i++) {
      char c = word.charAt(i);
      node = curr.get(c);
      if (node == null) {
        node = new Node(c);
        curr.put(c, node);
      }
      curr = node.children;
    }
    node.isEnd = true;
  }

  public boolean search(String word) {
    Node node = searchPrefix(word);
    return node != null && node.isEnd;
  }

  public boolean startsWith(String prefix) {
    return searchPrefix(prefix) != null;
  }

  private Node searchPrefix(String word) {
    Map<Character, Node> curr = trie;
    Node node = null;
    for (int i = 0; i < word.length(); i++) {
      char c = word.charAt(i);
      node = curr.get(c);
      if (node == null) {
        return null;
      }
      curr = node.children;
    }
    return node;
  }

  private static class Node {
    char data;
    boolean isEnd;
    Map<Character, Node> children = new HashMap<>();

    public Node(char data) {
      this.data = data;
    }
  }
}
----

== å‚è€ƒèµ„æ–™

. https://oi-wiki.org/string/trie/[å­—å…¸æ ‘ (Trie)^]
. https://zh.wikipedia.org/wiki/Trie[Trie^]




